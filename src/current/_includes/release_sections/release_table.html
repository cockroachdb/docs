{% raw %}
{% comment %}Template for release tables across different platforms{% endcomment %}

{% if s == "Production" %}
<h4>{{ s }} Releases</h4>

{% comment %}Linux Release Table{% endcomment %}
<section class="filter-content" markdown="1" data-scope="linux">
    <table class="release-table">
        <thead>
            <tr>
                <td>Version</td>
                <td>Date</td>
                <td>Intel 64-bit Downloads</td>
                {% if v_linux_arm %}<td>ARM 64-bit Downloads</td>{% endif %}
            </tr>
        </thead>
        <tbody>
            {% for r in releases %}
                {% assign current_patch = r.release_name | split: '.' | shift | shift | join: '' | times: 1 %}
                {% assign in_lts = false %}
                {% if has_lts_releases and current_patch >= lts_patch %}
                    {% assign in_lts = true %}
                {% endif %}

                <tr {% if r.release_name == latest_hotfix.release_name %}class="latest"{% endif %}>
                    <td>
                        <a href="releases/{{ v.major_version }}.html#{{ r.release_name | replace: ".", "-" }}">{{ r.release_name }}</a>
                        {% if in_lts %}{{ lts_link }}{% endif %}
                        {% if r.release_name == latest_hotfix.release_name %}
                            <span class="badge-new">Latest</span>
                        {% endif %}
                    </td>
                    <td>{{ r.release_date }}</td>
                    {% if r.withdrawn %}
                        <td colspan="2"><span class="badge badge-gray">Withdrawn</span></td>
                    {% elsif r.cloud_only %}
                        <td colspan="2"><span>{{ r.cloud_only_message_short }}</span></td>
                    {% elsif r.is_not_downloadable %}
                        <td colspan="2"><span>{{ is_not_downloadable_message }}</span></td>
                    {% else %}
                        <td>
                            <div>
                                <a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.linux-amd64.tgz">Full Binary</a>
                                {% if r.has_sha256sum %}
                                    (<a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.linux-amd64.tgz.sha256sum">SHA256</a>)
                                {% endif %}
                            </div>
                            {% if r.has_sql_only %}
                                <div>
                                    <a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.linux-amd64.tgz">SQL Shell Binary</a>
                                    {% if r.has_sha256sum %}
                                        (<a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.linux-amd64.tgz.sha256sum">SHA256</a>)
                                    {% endif %}
                                </div>
                            {% endif %}
                        </td>
                        {% if r.linux.linux_arm %}
                            <td>
                                {% if r.linux.linux_arm_experimental %}<b>Experimental:</b>{% endif %}
                                <div>
                                    <a {% if r.linux.linux_arm_experimental %}{{ experimental_download_js }}{% endif %} 
                                       href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.linux-arm64.tgz">Full Binary</a>
                                    {% if r.has_sha256sum %}
                                        (<a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.linux-arm64.tgz.sha256sum">SHA256</a>)
                                    {% endif %}
                                </div>
                                {% if r.has_sql_only %}
                                    <div>
                                        <a {% if r.linux.linux_arm_experimental %}{{ experimental_download_js }}{% endif %}
                                           href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.linux-arm64.tgz">SQL Shell Binary</a>
                                        {% if r.has_sha256sum %}
                                            (<a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.linux-arm64.tgz.sha256sum">SHA256</a>)
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </td>
                        {% endif %}
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

{% comment %}Mac Release Table{% endcomment %}
<section class="filter-content" markdown="1" data-scope="mac">
    <p>macOS downloads are <strong>experimental</strong>. Experimental downloads are not yet qualified for production use and not eligible for support or uptime SLA commitments.</p>
    
    <table class="release-table">
        <thead>
            <tr>
                <td>Version</td>
                <td>Date</td>
                <td>Intel 64-bit (Experimental) Downloads</td>
                {% if v_mac_arm %}<td>ARM 64-bit (Experimental) Downloads</td>{% endif %}
            </tr>
        </thead>
        <tbody>
            {% for r in releases %}
                <tr {% if r.release_name == latest_hotfix.release_name %}class="latest"{% endif %}>
                    <td>
                        <a href="releases/{{ v.major_version }}.html#{{ r.release_name | replace: ".", "-" }}">{{ r.release_name }}</a>
                        {% if r.release_name == latest_hotfix.release_name %}
                            <span class="badge-new">Latest</span>
                        {% endif %}
                    </td>
                    <td>{{ r.release_date }}</td>
                    {% if r.withdrawn %}
                        <td colspan="2"><span class="badge badge-gray">Withdrawn</span></td>
                    {% elsif r.cloud_only %}
                        <td colspan="2"><span>{{ r.cloud_only_message_short }}</span></td>
                    {% elsif r.is_not_downloadable %}
                        <td colspan="2"><span>{{ is_not_downloadable_message }}</span></td>
                    {% else %}
                        <td>
                            <div>
                                <a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.darwin-10.9-amd64.tgz">Full Binary</a>
                                {% if r.has_sha256sum %}
                                    (<a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.darwin-10.9-amd64.tgz.sha256sum">SHA256</a>)
                                {% endif %}
                            </div>
                            {% if r.has_sql_only %}
                                <div>
                                    <a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.darwin-10.9-amd64.tgz">SQL Shell Binary</a>
                                    {% if r.has_sha256sum %}
                                        (<a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.darwin-10.9-amd64.tgz.sha256sum">SHA256</a>)
                                    {% endif %}
                                </div>
                            {% endif %}
                        </td>
                        {% if r.mac.mac_arm %}
                            <td>
                                <div>
                                    <a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.darwin-11.0-arm64.tgz">Full Binary</a>
                                    {% if r.has_sha256sum %}
                                        (<a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.darwin-11.0-arm64.tgz.sha256sum">SHA256</a>)
                                    {% endif %}
                                </div>
                                {% if r.has_sql_only %}
                                    <div>
                                        <a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.darwin-11.0-arm64.tgz">SQL Shell Binary</a>
                                        {% if r.has_sha256sum %}
                                            (<a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.darwin-11.0-arm64.tgz.sha256sum">SHA256</a>)
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </td>
                        {% endif %}
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

{% comment %}Windows Release Table{% endcomment %}
<section class="filter-content" markdown="1" data-scope="windows">
    <p>Windows 8 or higher is required. Windows downloads are <strong>experimental</strong>.</p>
    
    <table class="release-table">
        <thead>
            <tr>
                <td>Version</td>
                <td>Date</td>
                <td>Intel 64-bit (Experimental) Downloads</td>
            </tr>
        </thead>
        <tbody>
            {% for r in releases %}
                <tr {% if r.release_name == latest_hotfix.release_name %}class="latest"{% endif %}>
                    <td>
                        <a href="releases/{{ v.major_version }}.html#{{ r.release_name | replace: ".", "-" }}">{{ r.release_name }}</a>
                        {% if r.release_name == latest_hotfix.release_name %}
                            <span class="badge-new">Latest</span>
                        {% endif %}
                    </td>
                    <td>{{ r.release_date }}</td>
                    {% if r.withdrawn %}
                        <td><span class="badge badge-gray">Withdrawn</span></td>
                    {% elsif r.cloud_only %}
                        <td><span>{{ r.cloud_only_message_short }}</span></td>
                    {% elsif r.is_not_downloadable %}
                        <td><span>{{ is_not_downloadable_message }}</span></td>
                    {% else %}
                        <td>
                            {% if r.windows %}
                                <div>
                                    <a {{ experimental_download_js }} href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.windows-6.2-amd64.zip">Full Binary</a>
                                    {% if r.has_sha256sum %}
                                        (<a href="https://binaries.cockroachdb.com/cockroach-{{ r.release_name }}.windows-6.2-amd64.zip.sha256sum">SHA256</a>)
                                    {% endif %}
                                </div>
                                {% if r.has_sql_only %}
                                    <div>
                                        <a {{ experimental_download_js }} href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.windows-6.2-amd64.zip">SQL Shell Binary</a>
                                        {% if r.has_sha256sum %}
                                            (<a href="https://binaries.cockroachdb.com/cockroach-sql-{{ r.release_name }}.windows-6.2-amd64.zip.sha256sum">SHA256</a>)
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

{% comment %}Docker Release Table{% endcomment %}
<section class="filter-content" markdown="1" data-scope="docker">
    {% if s == "Production" %}
        <p>Docker images for CockroachDB are published on <a href="https://hub.docker.com/r/cockroachdb/cockroach/tags">Docker Hub</a>.</p>
        {% assign show_notes_column = v.major_version == "v23.1" or v.major_version == "v22.2" %}
        
        {% if show_notes_column %}
            <p><a href="https://docs.docker.com/build/building/multi-platform/">Multi-platform images</a> include support for both Intel and ARM.</p>
        {% else %}
            <p>All Docker images for {{ v.major_version }} are <a href="https://docs.docker.com/build/building/multi-platform/">Multi-platform images</a> with support for both Intel and ARM.</p>
        {% endif %}
    {% endif %}

    <table class="release-table">
        <thead>
            <tr>
                <td>Version</td>
                <td>Date</td>
                <td>Docker image tag</td>
                {% if show_notes_column %}<td>Notes</td>{% endif %}
            </tr>
        </thead>
        <tbody>
            {% for r in releases %}
                {% assign current_patch = r.release_name | split: '.' | shift | shift | join: '' | times: 1 %}
                {% assign in_lts = false %}
                {% if has_lts_releases and current_patch >= lts_patch %}
                    {% assign in_lts = true %}
                {% endif %}

                <tr {% if r.release_name == latest_hotfix.release_name %}class="latest"{% endif %}>
                    <td>
                        <a href="releases/{{ v.major_version }}.html#{{ r.release_name | replace: ".", "-" }}">{{ r.release_name }}</a>
                        {% if in_lts %}{{ lts_link }}{% endif %}
                        {% if r.release_name == latest_hotfix.release_name %}
                            <span class="badge-new">Latest</span>
                        {% endif %}
                    </td>
                    <td>{{ r.release_date }}</td>
                    <td>
                        {% if r.withdrawn %}
                            <span class="badge badge-gray">Withdrawn</span>
                        {% elsif r.cloud_only %}
                            <span>{{ r.cloud_only_message_short }}</span>
                        {% elsif r.is_not_downloadable %}
                            <span>{{ is_not_downloadable_message }}</span>
                        {% else %}
                            {% if r.source == false %}
                                N/A
                            {% else %}
                                {% if show_notes_column %}
                                    {% if r.docker.docker_arm == false %}<b>Intel</b>:<br />{% else %}<b>Multi-platform</b>:<br />{% endif %}
                                {% endif %}
                                <code>{{ r.docker.docker_image }}:{{ r.release_name }}</code>
                            {% endif %}
                        {% endif %}
                    </td>
                    {% if show_notes_column %}
                        <td>
                            {% if r.docker.docker_arm_limited_access %}
                                <strong>Intel</strong>: Production<br /><strong>ARM</strong>: