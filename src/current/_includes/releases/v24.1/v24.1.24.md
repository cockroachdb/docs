## v24.1.24

Release Date: September 22, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v24-1-24-sql-language-changes">SQL language changes</h3>

- When `sql_safe_updates` is enabled, the `ALTER TABLE ... LOCALITY` statement will be blocked when trying to convert an existing table to `REGIONAL BY ROW`, unless a region column has been added to the table. This protects against undesired behavior that caused `UPDATE` or `DELETE` statements to fail against the table while the locality change was in progress. [#152603][#152603]

<h3 id="v24-1-24-operational-changes">Operational changes</h3>

- Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster setting `sql.ttl.replan_flow_threshold` may have been set to `0` to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had set `replan_flow_threshold` to `0` can be reset back to the default. [#151490][#151490]

<h3 id="v24-1-24-bug-fixes">Bug fixes</h3>

- Fixed a bug where `debug.zip` files collected from clusters with `disallow_full_table_scans` enabled were missing system table data. [#151222][#151222]
- Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column. [#152312][#152312]
- Fixed a bug where views could not reference the `crdb_region` column from their underlying tables in expressions. [#152744][#152744]

<h3 id="v24-1-24-performance-improvements">Performance improvements</h3>

- Lookup joins can now be used on tables with virtual columns even if the type of the search argument is not identical to the column type referenced in the virtual column. [#152893][#152893]


[#152603]: https://github.com/cockroachdb/cockroach/pull/152603
[#151490]: https://github.com/cockroachdb/cockroach/pull/151490
[#151222]: https://github.com/cockroachdb/cockroach/pull/151222
[#152312]: https://github.com/cockroachdb/cockroach/pull/152312
[#152744]: https://github.com/cockroachdb/cockroach/pull/152744
[#152893]: https://github.com/cockroachdb/cockroach/pull/152893
