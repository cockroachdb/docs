## v25.2.5

Release Date: August 22, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-2-5-general-changes">General changes</h3>

- Kafka v2 changefeed sinks now support
  a cluster setting that enables detailed error logging for messages
  exceeding Kafka v2 size limit. [#149829][#149829]

<h3 id="v25-2-5-operational-changes">Operational changes</h3>

- Introduced a cluster setting, `sql.stats.error_on_concurrent_create_stats.enabled`, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default, `true`, maintains the previous behavior. Setting `sql.stats.error_on_concurrent_create_stats.enabled` to `false` will cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters. [#149837][#149837]

<h3 id="v25-2-5-bug-fixes">Bug fixes</h3>

- Fixed an issue where the mvcc_timestamp field was incorrectly returning zero values when used with CDC queries. The timestamp is now emitted correctly. [#147114][#147114]
- Fixed a bug where database login could fail
  during LDAP, JWT, or OIDC authentication if the user's external group
  memberships did not correspond to any existing roles in the
  database. The login will now succeed, and no roles will be granted or
  revoked in this scenario. [#149747][#149747]
- Fixed a bug that would cause a `CALL` statement executed via a portal in the extended wire protocol to result in an error like `unknown portal ""` if the stored procedure contained `COMMIT` or `ROLLBACK` statements. The bug had existed since PL/pgSQL transaction control statements were introduced in v24.1. The fix will be off by default in versions prior to v25.3, and can be toggled on by setting `use_proc_txn_control_extended_protocol_fix = true`. [#149851][#149851]
- Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (the gateway node of the plan was not affected), and could only be mitigated by restarting the node. [#149919][#149919]
- Fixed an issue where some SQL metrics were not reported when `server.child_metrics.enabled` was enabled, `server.child_metrics.include_aggregate.enabled` was disabled, and `sql.metrics.application_name.enabled` and `sql.metrics.database_name.enabled` were also disabled. Specifically, metrics with no children now report their aggregate metrics regardless of the `server.child_metrics.include_aggregate.enabled` cluster setting. [#149937][#149937]
- Fixed a bug that would allow a race condition in foreign key cascades under `READ COMMITTED` and `REPEATABLE READ` isolation levels. [#150295][#150295]
- Fixed an issue where discarding zone configs on sequences did not actually remove the configuration. [#150359][#150359]
- Fixed a bug where the entire schema would become inaccessible if a table was referenced as an implicit record type by a user-defined function (UDF) while the table was undergoing an `IMPORT`. [#150439][#150439]
- Fixed invalid zone configurations that were generated when adding a super region to a 3-region database with a secondary region and region survivability. Previously, this could result in assigning more than the allowed number of replicas. [#150619][#150619]
- Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups. [#151082][#151082]
- Fixed a memory accounting issue in the client certificate cache that caused multiple allocations to be reported for the same certificate. The cache now accurately tracks memory usage and includes a safeguard to prevent it from negatively affecting SQL operations. [#151146][#151146]
- Previously, CockroachDB could encounter an internal error `trying to add a column of UNKNOWN type at ...` in rare cases when handling `CASE` or `OR` operations. This bug was present since v20.2 and is now fixed. [#151161][#151161]
- Previously, CockroachDB could hit an error
  `ERROR: span with results after resume span...` when evaluating some
  queries with ORDER BY ... DESC in an edge case. The bug has been present
  since about v22.1 and is now fixed. [#152185][#152185]

<h3 id="v25-2-5-miscellaneous">Miscellaneous</h3>

- Upgrade to Go 1.23.11 [#150988][#150988]


[#150619]: https://github.com/cockroachdb/cockroach/pull/150619
[#151082]: https://github.com/cockroachdb/cockroach/pull/151082
[#152185]: https://github.com/cockroachdb/cockroach/pull/152185
[#149851]: https://github.com/cockroachdb/cockroach/pull/149851
[#150295]: https://github.com/cockroachdb/cockroach/pull/150295
[#150439]: https://github.com/cockroachdb/cockroach/pull/150439
[#150988]: https://github.com/cockroachdb/cockroach/pull/150988
[#149837]: https://github.com/cockroachdb/cockroach/pull/149837
[#150359]: https://github.com/cockroachdb/cockroach/pull/150359
[#151146]: https://github.com/cockroachdb/cockroach/pull/151146
[#151161]: https://github.com/cockroachdb/cockroach/pull/151161
[#149829]: https://github.com/cockroachdb/cockroach/pull/149829
[#147114]: https://github.com/cockroachdb/cockroach/pull/147114
[#149747]: https://github.com/cockroachdb/cockroach/pull/149747
[#149919]: https://github.com/cockroachdb/cockroach/pull/149919
[#149937]: https://github.com/cockroachdb/cockroach/pull/149937
