## v26.1.0-beta.1

Release Date: December 17, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v26-1-0-beta-1-security-updates">Security updates</h3>

- We are adding a new flag
   `--allow-debug-user` to the cockroach start command to explicitly allow
   enabling the debug_user to log into the system. This flag is currently
   experimental and is disabled by default. When not set, authentication
   attempts by `debug_user` will be rejected with an error: `"certificate
   authentication failed for user "debug_user""` for SQL connections and
   `"failed to perform RPC, as debug_user login is not allowed"` for RPC
   connections.
  
   This flag is intended for debugging and troubleshooting purposes and should
   only be enabled when necessary for diagnostic operations. The debug_user
   should be disabled when not actively in use.
  
   Note: Certificates must include "debug_user" as one of the principals
   (CommonName or SubjectAlternativeName) for this functionality. The flag
   controls whether such certificates are accepted for both SQL client
   connections and RPC connections. [#158963][#158963]

<h3 id="v26-1-0-beta-1-{{-site.data.products.enterprise-}}-edition-changes">{{ site.data.products.enterprise }} edition changes</h3>

- Improved the description of the
  changefeed.default_range_distribution_strategy cluster setting to better
  explain the available options and their behavior.
  
  Epic: None [#158602][#158602]

<h3 id="v26-1-0-beta-1-sql-language-changes">SQL language changes</h3>

- `crdb_internal.index_usage_stats` and `crdb_internal.datums_to_bytes` are now available in the `information_schema` system catalog as `information_schema.crdb_index_usage_stats` and `information_schema.crdb_datums_to_bytes`, respectively. [#156963][#156963]
- The `ALTER COLUMN ...` sequence identity
  commands are run by the declarative schema changer. [#157030][#157030]
- Added support for `EXECUTE SCHEDULE {schedule_id}` to allow immediate execution of a scheduled job. This does not apply to `ALTER BACKUP SCHEDULE`; attempting to execute a backup schedule will result in an error. [#158694][#158694]
- `CREATE TYPE` with composite type syntax now supports array types in field definitions. For example, `CREATE TYPE t AS (a INT[])` and `CREATE TYPE t AS (a INT ARRAY)` now work correctly, matching PostgreSQL behavior. [#158888][#158888]
- introduces the new STRICT option for locality aware
  backups. When this flag is passed, the backup will fail if we attempt to backup
  data that lives in a kv node with locality tag X into a bucket with a different
  locality tag. [#158999][#158999]
- adds STRICT STORAGE LOCALITY option to backup cmd.
  Subsequent commit hooks it up to backup flow. [#158999][#158999]
- CREATE CHANGEFEED FOR DATABASE statement will
  return an error stating that the feature is not implemented. [#159000][#159000]
- The `WITH RESOLVED TIMESTAMP` option can be passed to `SHOW JOBS` or `SHOW JOB` to include the resolved timestamp, if any, for the jobs in the output columns. [#159068][#159068]

<h3 id="v26-1-0-beta-1-command-line-changes">Command-line changes</h3>

- You can now specify a user-defined database user when generating `debug zip` and `debug tsdump` files. Use the `--user` and `--url` flags to set the username. Previously, these operations required the root user. This change provides backward compatibility by defaulting the username to `root`. This update is part of an ongoing effort to limit root user access. [#158961][#158961]

<h3 id="v26-1-0-beta-1-bug-fixes">Bug fixes</h3>

- Fixed a bug where issuing a noop schedule modification
  could skip the next incremental backup
  
  Fixes: #158296 [#158820][#158820]
- Fixed a bug that allowed a column to be dropped from
  its table despite being referenced by a routine. The bug could happen when the
  column was only referenced as a target column in the SET clause of an UPDATE
  statement within the routine. This fix only applies to newly-created routines.
  In versions prior to v26.1, the fix must be enabled by setting the session
  variable `prevent_update_set_column_drop`. [#158935][#158935]
- Fixed a bug that caused routines to prevent
  dropping more columns than necessary, most notably columns referenced
  by computed column expressions. The fix is gated behind the session
  setting `use_improved_routine_deps_triggers_and_computed_cols`, which
  is off by default prior to v26.1. [#158935][#158935]
- A bug has been fixed which could cause incorrect
  results. The bug has existed since v21.2. From v21.2 up to v25.3, the
  bug only presented when all of the following were true:
    - The query was run with an explicit or implicit prepared statement.
    - The query had an equality filter on a placeholder and a UNIQUE
      column.
    - The column contained NULL values.
    - The placeholder was assigned to NULL during execution.
  In this case, the query could return rows in which the column's value is
  NULL, which violates SQL NULL-equality semantics. The correct result set
  should always be empty.
  Starting in v25.4, the requirements were loosened slightly. It was no
  longer necessary for the column to be UNIQUE. The bug could reproduce if
  the column was included in any index. [#159001][#159001]
- Fixed a bug where the `schema_locked` table storage parameter could be bypassed by combining `SET (schema_locked=false)` with other schema changes in the same `ALTER TABLE` statement using comma syntax. Schema-locked tables now correctly reject such combined statements. [#159017][#159017]

<h3 id="v26-1-0-beta-1-performance-improvements">Performance improvements</h3>

- Triggers now perform the descriptor lookup for `TG_TABLE_SCHEMA` against a cache. This can significantly reduce trigger planning latency in multi-region databases. [#144217][#144217]
- After triggers now perform the
  descriptor lookup for `TG_TABLE_SCHEMA` against a cache. This can
  significantly reduce trigger planning latency. [#158708][#158708]


[#158999]: https://github.com/cockroachdb/cockroach/pull/158999
[#159068]: https://github.com/cockroachdb/cockroach/pull/159068
[#158820]: https://github.com/cockroachdb/cockroach/pull/158820
[#158935]: https://github.com/cockroachdb/cockroach/pull/158935
[#159001]: https://github.com/cockroachdb/cockroach/pull/159001
[#158708]: https://github.com/cockroachdb/cockroach/pull/158708
[#158888]: https://github.com/cockroachdb/cockroach/pull/158888
[#158694]: https://github.com/cockroachdb/cockroach/pull/158694
[#144217]: https://github.com/cockroachdb/cockroach/pull/144217
[#156963]: https://github.com/cockroachdb/cockroach/pull/156963
[#158602]: https://github.com/cockroachdb/cockroach/pull/158602
[#157030]: https://github.com/cockroachdb/cockroach/pull/157030
[#159000]: https://github.com/cockroachdb/cockroach/pull/159000
[#158961]: https://github.com/cockroachdb/cockroach/pull/158961
[#159017]: https://github.com/cockroachdb/cockroach/pull/159017
[#158963]: https://github.com/cockroachdb/cockroach/pull/158963
