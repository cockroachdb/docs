## v25.3.7

Release Date: January 9, 2026

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-3-7-bug-fixes">Bug fixes</h3>

- Fixed a bug where a SQL statement with side effects (e.g., `INSERT`) inside a PL/pgSQL routine could be dropped if it used an `INTO` clause and none of the target variables were referenced. This bug had been present since v23.2. [#158345][#158345]
- Fixed a bug that could cause incorrect query results when using prepared statements with _NULL_ placeholders. The bug has existed since v21.2 and violated SQL _NULL_-equality semantics by returning rows with _NULL_ values when the result set should have been empty. From v21.2 to v25.3, the bug occurred when all of the following were true:
    - The query was run with an explicit or implicit prepared statement
    - The query had an equality filter on a placeholder and a `UNIQUE` column
    - The column contained _NULL_ values
    - The placeholder was assigned to _NULL_ during execution
  - Starting in v25.4, the requirements to trigger the bug were loosened: the column no longer needed to be `UNIQUE`, and the bug could be reproduced if the column was included in any index. [#159069][#159069]
- Fixed a bug that allowed columns to be dropped despite being referenced by a routine. This could occur when a column was only referenced as a target column in the `SET` clause of an `UPDATE` statement within the routine. This fix only applies to newly-created routines. In versions prior to v26.1, the fix must be enabled by setting the session variable `prevent_update_set_column_drop`. [#159442][#159442]
- Fixed a bug where creating a routine could create unnecessary column dependencies when the routine references columns through `CHECK` constraints (including those for RLS policies and hash-sharded indexes) or partial index predicates. These unnecessary dependencies prevented dropping the column without first dropping the routine. The fix is gated behind the session setting `use_improved_routine_deps_triggers_and_computed_cols`, which is off by default in versions prior to v26.1. [#159442][#159442]
- Fixed a bug that caused newly-created routines to incorrectly prevent dropping columns that were not directly referenced, most notably columns referenced by computed column expressions. The fix is gated behind the session setting `use_improved_routine_deps_triggers_and_computed_cols`, which is off by default prior to v26.1. [#159442][#159442]
- Fixed a bug that could cause a panic during changefeed startup if an error occurred while initializing the metrics controller. [#159547][#159547]
- Fixed a bug causing a query predicate to be ignored when the predicate was on a column following one or more `ENUM` columns in an index, the predicate constrained the column to multiple values, and a lookup join to the index was chosen for the query plan. This bug was introduced in 24.3.0 and has been present in all versions since. [#159776][#159776]
- Fixed a bug where renaming a column that participated in multiple hash-sharded indexes would fail. [#160089][#160089]
- Fixed a deadlock that could occur when a statistics creation task panicked.[#160583][#160583]

<h3 id="v25-3-7-performance-improvements">Performance improvements</h3>

- `AFTER` triggers now use a cache for descriptor lookups of `TG_TABLE_SCHEMA`, which can significantly reduce trigger planning latency. [#159386][#159386]
- Added a new session variable, `distsql_prevent_partitioning_soft_limited_scans`, which, when true, prevents scans with soft limits from being planned as multiple `TableReaders` by the physical planner. This should decrease the initial setup costs of some fully-distributed query plans. [#160604][#160604]

[#159442]: https://github.com/cockroachdb/cockroach/pull/159442
[#159547]: https://github.com/cockroachdb/cockroach/pull/159547
[#160583]: https://github.com/cockroachdb/cockroach/pull/160583
[#160604]: https://github.com/cockroachdb/cockroach/pull/160604
[#158345]: https://github.com/cockroachdb/cockroach/pull/158345
[#159069]: https://github.com/cockroachdb/cockroach/pull/159069
[#159776]: https://github.com/cockroachdb/cockroach/pull/159776
[#160089]: https://github.com/cockroachdb/cockroach/pull/160089
[#159386]: https://github.com/cockroachdb/cockroach/pull/159386
