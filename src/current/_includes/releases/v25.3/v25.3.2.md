## v25.3.2

Release Date: September 19, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-3-2-sql-language-changes">SQL language changes</h3>

- Added a new session variable, `disable_optimizer_rules`, which allows users to provide a comma-separated list of optimizer rules to disable during query optimization. This allows users to avoid rules that are known to create a suboptimal query plan for specific queries. [#152350][#152350]
- When `sql_safe_updates` is enabled, the `ALTER TABLE ... LOCALITY` statement will be blocked when trying to convert an existing table to `REGIONAL BY ROW`, unless a region column has been added to the table. This protects against undesired behavior that caused `UPDATE` or `DELETE` statements to fail against the table while the locality change was in progress. [#152594][#152594]

<h3 id="v25-3-2-operational-changes">Operational changes</h3>

- `auth.ldap.conn.latency.internal` has been added to denote the internal authentication time for ldap auth method. [#152341][#152341]

<h3 id="v25-3-2-bug-fixes">Bug fixes</h3>

- Addressed a bug on `schema_locked` tables when a column is dropped, and `schema_locked` is toggled for the user. [#151527][#151527]
- Fixed a bug that could cause excessive memory allocations when compacting timeseries keys. [#151815][#151815]
- Fixed a bug where `DROP USER` succeeded even though a role owned default privileges, which could leave invalid privilege entries in the system. [#151818][#151818]
- Previously, CockroachDB could hit an error `ERROR: span with results after resume span...` when evaluating some queries with `ORDER BY ... DESC` in an edge case. This bug was present since v22.1 and is now fixed. [#152138][#152138]
- Fixed a bug where `SHOW TABLES` would show inaccurate row counts if the most recent statistics collection was partial. [#152200][#152200]
- Fixed a bug that prevented `RESTORE` from working if there were computed columns or `ON UPDATE` expressions that referenced user-defined functions (UDFs). This bug was introduced in v25.3.0. [#152217][#152217]
- Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column. [#152315][#152315]
- Fixed a bug that allowed foreign-key violations to result from some combinations of concurrent `READ COMMITTED` and `SERIALIZABLE` transactions. If both `SERIALIZABLE` and weaker-isolation transactions will concurrently modify rows involved in foreign-key relationships, the `SERIALIZABLE` transactions must have the following session variables set in order to prevent any possible foreign-key violations: 
  - `SET enable_implicit_fk_locking_for_serializable = on;`
  - `SET enable_shared_locking_for_serializable = on;`
  - `SET enable_durable_locking_for_serializable = on;` [#152374][#152374]
- Added an automatic repair for dangling or invalid entries in the `system.comments` table. [#152473][#152473]
- Added the `use_soft_limit_for_distribute_scan` session variable (default: `false`), which controls whether CockroachDB uses the soft row count estimate when deciding whether an execution plan should be distributed. In v25.1, the physical planning heuristics were changed such that large constrained table scans, estimated to scan at least 10,000 rows (controlled via `distribute_scan_row_count_threshold`), would force plan distribution when `distsql=auto`. However, if the scan had a "soft limit" CockroachDB would still use the full estimate (for example, `10,000` in `estimated row count: 100â€“10,000`), sometimes unnecessarily distributing queries and increasing latency. The `use_soft_limit_for_distribute_scan` session variable addresses this by allowing the planner to use the soft limit when deciding whether a scan is "large". [#152556][#152556]
- Fixed a bug where views could not reference the `crdb_region` column from their underlying tables in expressions. [#152680][#152680]

<h3 id="v25-3-2-performance-improvements">Performance improvements</h3>

- Lookup joins can now be used on tables with virtual columns even if the type of the search argument is not identical to the column type referenced in the virtual column. [#152632][#152632]

<h3 id="v25-3-2-miscellaneous">Miscellaneous</h3>

- Tunes S3 client retry behavior to be more reliable in the
  presence of correlated errors. [#151873][#151873]


[#152594]: https://github.com/cockroachdb/cockroach/pull/152594
[#151815]: https://github.com/cockroachdb/cockroach/pull/151815
[#151818]: https://github.com/cockroachdb/cockroach/pull/151818
[#152374]: https://github.com/cockroachdb/cockroach/pull/152374
[#152473]: https://github.com/cockroachdb/cockroach/pull/152473
[#152680]: https://github.com/cockroachdb/cockroach/pull/152680
[#152138]: https://github.com/cockroachdb/cockroach/pull/152138
[#151873]: https://github.com/cockroachdb/cockroach/pull/151873
[#151527]: https://github.com/cockroachdb/cockroach/pull/151527
[#152200]: https://github.com/cockroachdb/cockroach/pull/152200
[#152556]: https://github.com/cockroachdb/cockroach/pull/152556
[#152350]: https://github.com/cockroachdb/cockroach/pull/152350
[#152341]: https://github.com/cockroachdb/cockroach/pull/152341
[#152217]: https://github.com/cockroachdb/cockroach/pull/152217
[#152315]: https://github.com/cockroachdb/cockroach/pull/152315
[#152632]: https://github.com/cockroachdb/cockroach/pull/152632
