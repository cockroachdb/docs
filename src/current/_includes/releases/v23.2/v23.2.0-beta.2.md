## v23.2.0-beta.2

Release Date: December 4, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-2-0-beta-2-general-changes">General changes</h3>

- CockroachDB will now periodically dump the state of its internal memory accounting system into `heap_profiler` directory, at the same time as the heap profiles are taken. This behavior can be disabled by changing `diagnostics.memory_monitoring_dumps.enabled` cluster setting to `false`. [#114998][#114998]

<h3 id="v23-2-0-beta-2-db-console-changes">DB Console changes</h3>

- The "Max Checkpoint Latency" chart title was updated to refer to "Lag" rather than latency. This better reflects the intention of the underlying metric - a measure of time between "now" and when the changefeed was last checkpointed. [#115003][#115003]

<h3 id="v23-2-0-beta-2-bug-fixes">Bug fixes</h3>

- SQL Activity properly showing internal statements when cluster setting `sql.stats.response.show_internal.enabled` is set to true. [#114824][#114824]
- An active replication report update could get stuck in a retry loop on clusters with over 10000 ranges, which would prevent a node from shutting down cleanly. This has been fixed. [#114178][#114178]
- Previously, CockroachDB could encounter an internal error when using the text format (as opposed to binary) when preparing statements with user-defined composite types. The bug was introduced in 23.1 and is now fixed. [#115064][#115064]
- The store queues will no longer leave purgatory replicas which have changed replica IDs, or have been destroyed stuck unable to process via the respective queue again if re-added. [#115037][#115037]
- Fixed a bug that would cause a prepared statement to fail if it referenced an enum as well as a table that has undergone a schema change. [#115132][#115132]

<h3 id="v23-2-0-beta-2-performance-improvements">Performance improvements</h3>

- Query planning time has been reduced significantly for some queries in which many tables are joined. [#114445][#114445]

<h3 id="v23-2-0-beta-2-miscellaneous">Miscellaneous</h3>

<h4 id="v23-2-0-beta-2-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#115181][#115181] [bc517fda8][bc517fda8] Revert "release-23.2: docker: temporarily use curl to install tzdata" (Rail Aliiev <rail@cockroachlabs.com>)
- [#115101][#115101] [bcdc589b8][bcdc589b8] release-23.2: streamingccl: allow CUTOVER TO LATEST before initial scan finishes (Michael Butler <butler@cockroachlabs.com>)
- [#115145][#115145] [32a824580][32a824580] release-23.2: streamingccl: test that replicated backup fails post cutover (Michael Butler <butler@cockroachlabs.com>)

<h3 id="v23-2-0-beta-2-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v23-2-0-beta-2-contributors">Contributors</h3>

This release includes 38 merged PRs by 20 authors.

</div>

[#114178]: https://github.com/cockroachdb/cockroach/pull/114178
[#114445]: https://github.com/cockroachdb/cockroach/pull/114445
[#114824]: https://github.com/cockroachdb/cockroach/pull/114824
[#114998]: https://github.com/cockroachdb/cockroach/pull/114998
[#115003]: https://github.com/cockroachdb/cockroach/pull/115003
[#115037]: https://github.com/cockroachdb/cockroach/pull/115037
[#115064]: https://github.com/cockroachdb/cockroach/pull/115064
[#115101]: https://github.com/cockroachdb/cockroach/pull/115101
[#115132]: https://github.com/cockroachdb/cockroach/pull/115132
[#115145]: https://github.com/cockroachdb/cockroach/pull/115145
[#115181]: https://github.com/cockroachdb/cockroach/pull/115181
[32a824580]: https://github.com/cockroachdb/cockroach/commit/32a824580
[bc517fda8]: https://github.com/cockroachdb/cockroach/commit/bc517fda8
[bcdc589b8]: https://github.com/cockroachdb/cockroach/commit/bcdc589b8
