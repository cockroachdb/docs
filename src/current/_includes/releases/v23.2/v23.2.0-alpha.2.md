## v23.2.0-alpha.2

Release Date: October 2, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-2-0-alpha-2-security-updates">Security updates</h3>

- The `SIGHUP` signal now clears the cached expiration times for [client certificates](https://www.cockroachlabs.com/docs/v23.2/cockroach-cert#how-security-certificates-work) that are reported by the `security.certificate.expiration.client` metric. [#110726][#110726]

<h3 id="v23-2-0-alpha-2-sql-language-changes">SQL language changes</h3>

- The `discard` [log message](https://www.cockroachlabs.com/docs/v23.2/logging-overview) is now limited to once per minute by default. The message now includes both the number of transactions and the number of statements that were discarded. [#110805][#110805]
- The [cluster setting](https://www.cockroachlabs.com/docs/v23.2/cluster-settings) `kv.rangefeed.enabled` no longer controls access to `RANGEFEED SQL` commands. Instead, use `feature.changefeed.enabled`. [#110676][#110676]
- SQL commands that were previously limited to the `admin` [system privilege](https://www.cockroachlabs.com/docs/v23.2/security-reference/authorization#supported-privileges) can now be used by users with the `VIEWCLUSTERMETADATA` or `REPAIRCLUSTERMETADATA` system privilege, depending on whether the operation is read-only or modifies state. [#110084][#110084]
- Added a `last_error` column to the `cluster_execution_insights`, `node_execution_insights`, `cluster_txn_execution_insights`, and `node_txn_execution_insights` tables. These columns contain error messages for failed executions. [#110565][#110565]

<h3 id="v23-2-0-alpha-2-operational-changes">Operational changes</h3>

- Removed the node-level `engine.stalls` timeseries metric. This metric has not been updated for several releases. [#110936][#110936]

<h3 id="v23-2-0-alpha-2-db-console-changes">DB Console changes</h3>

- The legend is now always displayed on charts in DB Console Metrics pages. In addition, when you select an item from the legend that represents a single line in the chart, that line is selected in the chart. [#110809][#110809]
- When collecting a [statement bundle](https://www.cockroachlabs.com/docs/v23.2/cockroach-statement-diag), you can now filter by a specific [plan gist](https://www.cockroachlabs.com/docs/v23.2/ui-statements-page#explain-plans) or collect diagnostics for all plan gists. [#110931][#110931]
- [Statement](https://www.cockroachlabs.com/docs/v23.2/ui-statements-page) and [Transaction](https://www.cockroachlabs.com/docs/v23.2/ui-transactions-page) detail pages now include an **Error Message** row. Users with the `VIEWACTIVITY` [system privilege](https://www.cockroachlabs.com/docs/v23.2/security-reference/authorization#supported-privileges) can view the full error message, and users with the `VIEWACTIVTYREDACTED` system privilege can view the redacted error message. If a user has both privileges, `VIEWACTIVITYTREDACTED`` takes precedence. [#110849][#110849]
- A new dashboard in the [SQL Dashboard page](https://www.cockroachlabs.com/docs/v23.2/ui-sql-dashboard) tracks how often distributed queries with errors were rerun using the "rerun as local" mechanism, as well as how often those reruns failed. the number of times distributed queries that resulted in errors were rerun as local as well as when those reruns failed. The "rerun as local" mechanism is new in v23.2 and is enabled by default. For more information, contact your Cockroach Labs account representative. [#110619][#110619]

<h3 id="v23-2-0-alpha-2-bug-fixes">Bug fixes</h3>

- Fixed a race condition in the [Replica lifecycle](https://www.cockroachlabs.com/docs/v23.2/architecture/replication-layer) that could result in a failed SQL request when the request could have been successfully retried. [#110806][#110806]
- Fixed a bug where a [`CREATE TABLE`](https://www.cockroachlabs.com/docs/v23.2/create-table) command with an `IDENTITY` column did not properly propagate the type of the column into the sequence. [#110621][#110621]
- Fixed a panic when decoding a gist in a foreign database that does not contain a table referred to by the gist. [#110966][#110966]
- A synthetic `dropped` column have been added to the `pg_attribute` table. This column tracks the attribution numbers for dropped attributions, to work around issues with ORMs that are not designed to handle gaps in attribution numbering in the `pg_attribute` table. [#111019][#111019]
- Fixed a rare internal error in the `unnest` and `information_schema._pg_expandarray` [built-in functions](https://www.cockroachlabs.com/docs/v23.2/functions-and-operators) where passed string arguments could be cast to an array. [#110956][#110956]
- External connection URLs now accept the scheme `azure-blob` for connections to Azure Blob Storage and the scheme `azure-kms` for connections to Azure KMS. For backward compatibility, schemes `azure` and `azure-storage` schemes continue to work for connections to Azure Blob Storage. [#111217][#111217]
- Fixed a performance bug that could result in rewriting a 128-MB file each time a store file is created, renamed, or removed when [Encryption At Rest](https://www.cockroachlabs.com/docs/v23.2/security-reference/encryption#encryption-at-rest) is enabled on a large store with many small files. [#111069][#111069]

<h3 id="v23-2-0-alpha-2-contributors">Contributors</h3>

This release includes 102 merged PRs by 43 authors.

</div>

[#110084]: https://github.com/cockroachdb/cockroach/pull/110084
[#110565]: https://github.com/cockroachdb/cockroach/pull/110565
[#110619]: https://github.com/cockroachdb/cockroach/pull/110619
[#110621]: https://github.com/cockroachdb/cockroach/pull/110621
[#110676]: https://github.com/cockroachdb/cockroach/pull/110676
[#110726]: https://github.com/cockroachdb/cockroach/pull/110726
[#110805]: https://github.com/cockroachdb/cockroach/pull/110805
[#110806]: https://github.com/cockroachdb/cockroach/pull/110806
[#110809]: https://github.com/cockroachdb/cockroach/pull/110809
[#110849]: https://github.com/cockroachdb/cockroach/pull/110849
[#110931]: https://github.com/cockroachdb/cockroach/pull/110931
[#110936]: https://github.com/cockroachdb/cockroach/pull/110936
[#110956]: https://github.com/cockroachdb/cockroach/pull/110956
[#110966]: https://github.com/cockroachdb/cockroach/pull/110966
[#111019]: https://github.com/cockroachdb/cockroach/pull/111019
[#111069]: https://github.com/cockroachdb/cockroach/pull/111069
[#111217]: https://github.com/cockroachdb/cockroach/pull/111217
