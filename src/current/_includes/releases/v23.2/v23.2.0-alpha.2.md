## v23.2.0-alpha.2

Release Date: October 2, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-2-0-alpha-2-security-updates">Security updates</h3>

- The SIGHUP signal will now clear the cached expiration times for client certificates that are reported by the security.certificate.expiration.client metric. [#110726][#110726]
- Endpoints in the admin and status server that previously required the admin role now can be used by users with the VIEWCLUSTERMETADATA or REPAIRCLUSTERMETADATA system privilege, depending on whether the endpoint is read-only or can modify state. [#110609][#110609]

<h3 id="v23-2-0-alpha-2-sql-language-changes">SQL language changes</h3>

- The discard log message is now limited to once per minute by default. The message was also changed to have both the number of transactions and the number of statements that were discarded. [#110805][#110805]
- It is not possible any more to control access to the RANGEFEED SQL syntax by modifying the cluster setting `kv.rangefeed.enabled`. Instead use `feature.changefeed.enabled`. [#110676][#110676]
- SQL commands that were previously only usable by users with the admin role can now be used by users with the VIEWCLUSTERMETADATA or REPAIRCLUSTERMETADATA system privilege, depending on whether the operation is read-only or modifies state. [#110084][#110084]
- Adds `last_error` column to the `[cluster|node]_execution_insights` and `[cluster|node]_txn_execution_insights` tables which keeps track of the error message for failed executions. [#110565][#110565]

<h3 id="v23-2-0-alpha-2-operational-changes">Operational changes</h3>

- Removed node-level `engine.stalls` timeseries metric. This metric has not been updated for several releases. [#110936][#110936]

<h3 id="v23-2-0-alpha-2-db-console-changes">DB Console changes</h3>

- Always show the legend on Metrics charts, allowing single lines to be selected. [#110809][#110809]
- Add option to filter out by specific plan gist when collecting a statement bundle. [#110931][#110931]
- Added a tooltip to the ranges chart on the replication dashboard, describing the metric in single vs cluster view. [#111115][#111115]
- Adds "Error message" row to the statement and transaction insights details pages. If the user has VIEWACTIVITY, they are able to view the full error message. If they have VIEWACTIVTYREDACTED, they are given a redacted error message. If they have both, VIEWACTIVITYTREDACTED  takes precedence. [#110849][#110849]
- An additional dashboard has been added to SQL metrics page. It tracks the number of times distributed queries that resulted in errors were rerun as local as well as when those reruns failed. This "rerun as local" mechanism is new in 23.2 and is enabled by default but could be disabled by updating the undocumented cluster setting `sql.distsql.distributed_query_rerun_locally.enabled` to `false`. [#110619][#110619]

<h3 id="v23-2-0-alpha-2-bug-fixes">Bug fixes</h3>

- Fixed a race condition in Replica lifecycle which could result in a failed SQL request in cases where it could be successfully retried.  Epic: none [#110806][#110806]
- CREATE TABLE with IDENTITY columns did not properly propagate the type of the column into the sequence. [#110621][#110621]
- Fixed panic when decoding gist in DB without the table referred to by the gist. [#110966][#110966]
- Pg_attribute could have sparsely populated attnum's since dropped columns were not included. [#111019][#111019]
- Fixed an edge case in the `unnest` and `information_schema._pg_expandarray` builtin functions that could cause an internal error when passed string arguments that could be cast to an array. [#110956][#110956]
- Fixes azure schemes in storage, kms and external conns. [#111217][#111217]

<h3 id="v23-2-0-alpha-2-performance-improvements">Performance improvements</h3>

- Performance of large stores using encryption-at-rest with many files is improved by removing a pathological behavior where every file creation, rename or removal could result in a rewrite of a 128MB file. [#111069][#111069]

<h3 id="v23-2-0-alpha-2-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v23-2-0-alpha-2-contributors">Contributors</h3>

This release includes 102 merged PRs by 43 authors.
We would like to thank the following contributors from the CockroachDB community:

- Wenyi Hu (first-time contributor, CockroachDB team member)
- Xhesika Malecaj (first-time contributor, CockroachDB team member)
- rharding6373

</div>

[#110084]: https://github.com/cockroachdb/cockroach/pull/110084
[#110565]: https://github.com/cockroachdb/cockroach/pull/110565
[#110609]: https://github.com/cockroachdb/cockroach/pull/110609
[#110619]: https://github.com/cockroachdb/cockroach/pull/110619
[#110621]: https://github.com/cockroachdb/cockroach/pull/110621
[#110676]: https://github.com/cockroachdb/cockroach/pull/110676
[#110726]: https://github.com/cockroachdb/cockroach/pull/110726
[#110805]: https://github.com/cockroachdb/cockroach/pull/110805
[#110806]: https://github.com/cockroachdb/cockroach/pull/110806
[#110809]: https://github.com/cockroachdb/cockroach/pull/110809
[#110849]: https://github.com/cockroachdb/cockroach/pull/110849
[#110931]: https://github.com/cockroachdb/cockroach/pull/110931
[#110936]: https://github.com/cockroachdb/cockroach/pull/110936
[#110956]: https://github.com/cockroachdb/cockroach/pull/110956
[#110966]: https://github.com/cockroachdb/cockroach/pull/110966
[#111019]: https://github.com/cockroachdb/cockroach/pull/111019
[#111069]: https://github.com/cockroachdb/cockroach/pull/111069
[#111115]: https://github.com/cockroachdb/cockroach/pull/111115
[#111217]: https://github.com/cockroachdb/cockroach/pull/111217
