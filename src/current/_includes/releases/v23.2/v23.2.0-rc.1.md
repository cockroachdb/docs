## v23.2.0-rc.1

Release Date: December 21, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-2-0-rc-1-{{-site.data.products.enterprise-}}-edition-changes">{{ site.data.products.enterprise }} edition changes</h3>

- New SQL function fips_ready can be used to verify the FIPS readiness of the gateway node. [#116281][#116281]
- PCR now retries for just over 3 minutes before failing. Epic: none. [#116404][#116404]

<h3 id="v23-2-0-rc-1-sql-language-changes">SQL language changes</h3>

- It is now possible to run CALL statements with EXPLAIN. The `EXPLAIN (OPT)` variant will show the body of the procedure, while other variants will only show the procedure name and arguments. [#116273][#116273]
- Fixes a bug in PLpgSQL where altering the name of a sequence or UDT that was used in a PLpgSQL function or procedure could break them. This is only present in 23.2 alpha and beta releases. [#116420][#116420]
- CockroachDB now supports IMPORT INTO a table that has columns typed as arrays of user-defined types (like enums). Tables that uses multiple user-defined types with the same name but different schemas are still unsupported. [#116360][#116360]
- The new SELECT FOR UPDATE implementation used under Read Committed isolation (and under Serializable isolation when optimizer_use_lock_op_for_serializable is true) now locks all column families instead of only the first column family. [#116828][#116828]
- Fix a bug where SELECT FOR UPDATE under Read Committed isolation on multi-column-family tables was not locking column families containing only key columns. [#116828][#116828]

<h3 id="v23-2-0-rc-1-operational-changes">Operational changes</h3>

- The cluster settings storage.single_delete.crash_on_invariant_violation.enabled and storage.single_delete.crash_on_ineffectual.enabled default to true since these can be indicative of a serious bug that could corrupt data. [#116604][#116604]

<h3 id="v23-2-0-rc-1-command-line-changes">Command-line changes</h3>

- New command `cockroach debug enterprise-check-fips` diagnoses errors in FIPS deployments [#116281][#116281]
- New flag --enterprise-require-fips-ready can be added to any CRDB command to prevent startup if certain prerequisites for FIPS compliance are not met. [#116281][#116281]

<h3 id="v23-2-0-rc-1-db-console-changes">DB Console changes</h3>

- Update "CPU Time" label to "SQL CPU Time" on the Console and add clarification to its tooltip. [#116450][#116450]

<h3 id="v23-2-0-rc-1-bug-fixes">Bug fixes</h3>

- A bug has been fixed that caused node crashes and panics when running `INSERT` queries on `REGIONAL BY ROW` tables with `UNIQUE` constraints or indexes. The bug is only present in version 23.2.0-beta.1. [#116343][#116343]
- UPDATE, UPSERT, and INSERT ON CONFLICT queries are now disallowed under read committed isolation when the table contains a check constraint involving a column family that is updated, and the check constraint also involves a column family that is *not* updated, but *is* read. This is a temporary fix to prevent possible violation of the check constraint, and the restriction will be lifted in the future. [#116429][#116429]
- Fix a bug where scheduled jobs using external storage providers may fail shortly after node startup. [#116205][#116205]
- Remove ID from event description when is `undefined`. [#116519][#116519]
- Fixed the formatting for `PLpgSQL` routines, which could prevent creating a routine with loop labels, and could prevent some expressions from being redacted correctly. The bug only existed in alpha and beta versions of 23.2. [#116711][#116711]
- Fixed a bug that would cause a syntax error during redaction of a PL/pgSQL routine. The bug existed only in alpha and beta versions of the 23.2 release. [#116711][#116711]
- Fixed a bug that would cause syntax errors when attempting to RESTORE a database with PL/pgSQL UDFs or stored procedures. This bug only affected alpha and beta versions of 23.2. [#116711][#116711]

<h3 id="v23-2-0-rc-1-miscellaneous">Miscellaneous</h3>

<h4 id="v23-2-0-rc-1-missing-category">Missing category</h4>

- Note Release justification: test-only fix [#116392][#116392]

<h3 id="v23-2-0-rc-1-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v23-2-0-rc-1-contributors">Contributors</h3>

This release includes 44 merged PRs by 23 authors.
We would like to thank the following contributors from the CockroachDB community:

- David Hartunian (first-time contributor, CockroachDB team member)
- rharding6373

</div>

[#116205]: https://github.com/cockroachdb/cockroach/pull/116205
[#116273]: https://github.com/cockroachdb/cockroach/pull/116273
[#116281]: https://github.com/cockroachdb/cockroach/pull/116281
[#116343]: https://github.com/cockroachdb/cockroach/pull/116343
[#116360]: https://github.com/cockroachdb/cockroach/pull/116360
[#116392]: https://github.com/cockroachdb/cockroach/pull/116392
[#116404]: https://github.com/cockroachdb/cockroach/pull/116404
[#116420]: https://github.com/cockroachdb/cockroach/pull/116420
[#116429]: https://github.com/cockroachdb/cockroach/pull/116429
[#116450]: https://github.com/cockroachdb/cockroach/pull/116450
[#116519]: https://github.com/cockroachdb/cockroach/pull/116519
[#116604]: https://github.com/cockroachdb/cockroach/pull/116604
[#116711]: https://github.com/cockroachdb/cockroach/pull/116711
[#116828]: https://github.com/cockroachdb/cockroach/pull/116828
