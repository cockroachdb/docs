## v22.2.18

Release Date: February 8, 2024

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v22-2-18-bug-fixes">Bug fixes</h3>

- Fixed a bug that could cause DELETE queries sent by the row-level TTL job to use a secondary index rather than the primary index to find the rows to delete. This could lead to some DELETE operations taking a much longer time than they should. This bug was present since v22.2.0. [#118420][#118420]
- Fixed a bug where a changefeed could omit events in rare cases, logging the error "cdc ux violation: detected timestamp ... that is less or equal to the local frontier". This can happen if a rangefeed runs on a follower replica that lags significantly behind the leaseholder, a transaction commits and removes its transaction record before its intent resolution is applied on the follower, the follower's closed timestamp has advanced past the transaction commit timestamp, and the rangefeed attempts to push the transaction to a new timestamp (at least 10 seconds after the transaction began). This may cause the rangefeed to prematurely emit a checkpoint before emitting writes at lower timestamps, which in turn may cause the changefeed to drop these events entirely, never emitting them. [#118633][#118633]

<h3 id="v22-2-18-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v22-2-18-contributors">Contributors</h3>

This release includes 7 merged PRs by 3 authors.

</div>

[#118420]: https://github.com/cockroachdb/cockroach/pull/118420
[#118633]: https://github.com/cockroachdb/cockroach/pull/118633
