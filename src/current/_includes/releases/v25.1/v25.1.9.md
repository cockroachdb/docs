## v25.1.9

Release Date: July 28, 2025

{% include releases/release-downloads-2023.md release=include.release %}

<h3 id="v25-1-9-sql-language-changes">SQL language changes</h3>

- Added a session variable `initial_retry_backoff_for_read_committed` that controls the initial backoff duration when retrying an individual statement in an explicit `READ COMMITTED` transaction. A duration of `0` disables exponential backoff. If a statement in an explicit `READ COMMITTED` transaction is failing with the `40001` error `ERROR: restart transaction: read committed retry limit exceeded; set by max_retries_for_read_committed=...`, then you should set `initial_retry_backoff_for_read_committed` to a duration proportional to the typical execution time of the statement (in addition to also increasing `max_retries_for_read_committed`).
 [#148223][#148223]
- Added the metrics `sql.txn.auto_retry.count` and `sql.statements.auto_retry.count`, which count the number of automatic retries of SQL transactions and statements, respectively, within the database. These metrics differ from the related `txn.restarts.*` metrics, which count retryable errors emitted by the KV layer that must be retried. The new `sql.txn.auto_retry.count` and `sql.statements.auto_retry.count` metrics count auto-retry actions taken by the SQL layer in response to some of those retryable errors.
 [#148223][#148223]

<h3 id="v25-1-9-db-console-changes">DB Console changes</h3>

- Updated the "Learn more" link on the **Hot Ranges** page to direct users to a newer, more comprehensive reference guide about hotspots.
 [#148521][#148521]

<h3 id="v25-1-9-bug-fixes">Bug fixes</h3>

- Fixed a data race in the `cloudstorage` sink.
 [#147162][#147162]
- Fixed an error in `crdb_internal.table_spans` that could occur when a table's schema had been dropped.
 [#147976][#147976]
- Fixed a bug where `libpq` clients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).
 [#148469][#148469]
- The `RESET ALL` statement no longer affects the following session variables:
  - `is_superuser`
  - `role`
  - `session_authorization`
  - `transaction_isolation`
  - `transaction_priority`
  - `transaction_status`
  - `transaction_read_only`
  
    This better matches PostgreSQL behavior for `RESET ALL`. In addition, the `DISCARD ALL` statement no longer errors when `default_transaction_use_follower_reads` is enabled.
 [#149429][#149429]
- In v25.1, automatic partial statistics collection was enabled by default (by setting the `sql.stats.automatic_partial_collection.enabled` cluster setting to `true`). Partial statistics collection may encounter certain expected scenarios that were previously reported as failed stats jobs with PostgreSQL error code `55000`. These errors are benign and are no longer reported. Instead, the stats job will be marked as "succeeded," though no new statistics will be created.
 [#149624][#149624]
- Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (the gateway node of the plan was not affected), and could only be mitigated by restarting the node.
 [#149925][#149925]
- Fixed a bug that would allow a race condition in foreign key cascades under `READ COMMITTED` and `REPEATABLE READ` isolation levels.
 [#150339][#150339]


[#148521]: https://github.com/cockroachdb/cockroach/pull/148521
[#147162]: https://github.com/cockroachdb/cockroach/pull/147162
[#147976]: https://github.com/cockroachdb/cockroach/pull/147976
[#148469]: https://github.com/cockroachdb/cockroach/pull/148469
[#149925]: https://github.com/cockroachdb/cockroach/pull/149925
[#150339]: https://github.com/cockroachdb/cockroach/pull/150339
[#148223]: https://github.com/cockroachdb/cockroach/pull/148223
[#149624]: https://github.com/cockroachdb/cockroach/pull/149624
[#149429]: https://github.com/cockroachdb/cockroach/pull/149429
