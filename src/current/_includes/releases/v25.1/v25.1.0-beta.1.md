## v25.1.0-beta.1

Release Date: January 20, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-1-0-beta-1-sql-language-changes">SQL language changes</h3>

- When a user runs CREATE LOGICALLY REPLICATED TABLE, they must specify one of the following options: - UNIDIRECTIONAL: setups a unidirectional stream with fast initial scan - BIDIRECTIONAL ON {dest uri}: sets up a bidirectional stream from the original   dest to the original source. [#138297][#138297]
- LDR and PCR may use the `crdb_route=gateway` query option to route the replication streams over a load balancer.  Epic: CRDB-40896 [#138697][#138697]

<h3 id="v25-1-0-beta-1-operational-changes">Operational changes</h3>

- The `node decommission` cli command now waits until the target node is drained before marking it as fully decommissioned. Previously, it would start drain but not wait, leaving the target node briefly in a state where it would be unable to communicate with the cluster but would still accept client requests (which would then hang or hit unexpected errors). [#138732][#138732]
- The cluster setting `changefeed.frontier_highwater_lag_checkpoint_threshold` has been renamed to `changefeed.span_checkpoint.lag_threshold`. The old name remains available for backwards-compatibility. [#139064][#139064]

<h3 id="v25-1-0-beta-1-bug-fixes">Bug fixes</h3>

- Bounded memory leak that could previously occur when evaluating some memory-intensive queries via the vectorized engine in CockroachDB has now been fixed. The leak has been present since 20.2 version. [#138804][#138804]
- Fixed a bug where columns created with GENERATED ... BY IDENTITY with the SERIAL type could incorrectly fail internal validations. [#139084][#139084]

<h3 id="v25-1-0-beta-1-build-changes">Build changes</h3>

- Roll back the use of PGO for releases. We plan to implement this instead for 25.2. [#139092][#139092]

<h3 id="v25-1-0-beta-1-miscellaneous">Miscellaneous</h3>

<h4 id="v25-1-0-beta-1-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#139042][#139042] [cc8e09034][cc8e09034] roachtest: fix single node sysbench setup
- [#139041][#139041] [d4d9811d8][d4d9811d8] DEPS: fix build when cache clear
- [#138849][#138849] [b0f2b656d][b0f2b656d] roachprod: retry hostname validation on different nodes
- [#138849][#138849] [d4ea7302d][d4ea7302d] roachprod: retry hostname validation on different nodes
- [#138283][#138283] [3708ee527][3708ee527] DEPS: upgrade grpc to v1.57.2
- [#138283][#138283] [4e3b377d8][4e3b377d8] DEPS: upgrade grpc to v1.57.2
- [#138283][#138283] [00f75802a][00f75802a] DEPS: upgrade grpc to v1.57.2
- [#138283][#138283] [59e987a9f][59e987a9f] DEPS: upgrade grpc to v1.57.2
- [#138283][#138283] [87d99d96b][87d99d96b] DEPS: upgrade grpc to v1.57.2
- [#137319][#137319] [780f5a6c6][780f5a6c6] vecstore: implement partition manipulation functions
- [#137319][#137319] [6e251fb53][6e251fb53] vecstore: implement partition manipulation functions
- [#137319][#137319] [067579e89][067579e89] vecstore: implement partition manipulation functions
- [#136879][#136879] [0d2b39732][0d2b39732] roachprod: refactor Monitor
- [#136879][#136879] [23806329e][23806329e] roachprod: refactor Monitor
- [#136879][#136879] [b957e65c3][b957e65c3] roachprod: refactor Monitor
- [#136879][#136879] [1b1b1b763][1b1b1b763] roachprod: refactor Monitor
- [#136879][#136879] [b8371641b][b8371641b] roachprod: refactor Monitor
- [#136879][#136879] [78a873fd4][78a873fd4] roachprod: refactor Monitor
- [#136879][#136879] [a09069f29][a09069f29] roachprod: refactor Monitor
- [#136879][#136879] [f2f1b2ced][f2f1b2ced] roachprod: refactor Monitor

<h3 id="v25-1-0-beta-1-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}



[#136879]: https://github.com/cockroachdb/cockroach/pull/136879
[#137319]: https://github.com/cockroachdb/cockroach/pull/137319
[#138283]: https://github.com/cockroachdb/cockroach/pull/138283
[#138297]: https://github.com/cockroachdb/cockroach/pull/138297
[#138697]: https://github.com/cockroachdb/cockroach/pull/138697
[#138732]: https://github.com/cockroachdb/cockroach/pull/138732
[#138804]: https://github.com/cockroachdb/cockroach/pull/138804
[#138849]: https://github.com/cockroachdb/cockroach/pull/138849
[#139041]: https://github.com/cockroachdb/cockroach/pull/139041
[#139042]: https://github.com/cockroachdb/cockroach/pull/139042
[#139064]: https://github.com/cockroachdb/cockroach/pull/139064
[#139084]: https://github.com/cockroachdb/cockroach/pull/139084
[#139092]: https://github.com/cockroachdb/cockroach/pull/139092
[00f75802a]: https://github.com/cockroachdb/cockroach/commit/00f75802a
[067579e89]: https://github.com/cockroachdb/cockroach/commit/067579e89
[0d2b39732]: https://github.com/cockroachdb/cockroach/commit/0d2b39732
[1b1b1b763]: https://github.com/cockroachdb/cockroach/commit/1b1b1b763
[23806329e]: https://github.com/cockroachdb/cockroach/commit/23806329e
[3708ee527]: https://github.com/cockroachdb/cockroach/commit/3708ee527
[4e3b377d8]: https://github.com/cockroachdb/cockroach/commit/4e3b377d8
[59e987a9f]: https://github.com/cockroachdb/cockroach/commit/59e987a9f
[6e251fb53]: https://github.com/cockroachdb/cockroach/commit/6e251fb53
[780f5a6c6]: https://github.com/cockroachdb/cockroach/commit/780f5a6c6
[78a873fd4]: https://github.com/cockroachdb/cockroach/commit/78a873fd4
[87d99d96b]: https://github.com/cockroachdb/cockroach/commit/87d99d96b
[a09069f29]: https://github.com/cockroachdb/cockroach/commit/a09069f29
[b0f2b656d]: https://github.com/cockroachdb/cockroach/commit/b0f2b656d
[b8371641b]: https://github.com/cockroachdb/cockroach/commit/b8371641b
[b957e65c3]: https://github.com/cockroachdb/cockroach/commit/b957e65c3
[cc8e09034]: https://github.com/cockroachdb/cockroach/commit/cc8e09034
[d4d9811d8]: https://github.com/cockroachdb/cockroach/commit/d4d9811d8
[d4ea7302d]: https://github.com/cockroachdb/cockroach/commit/d4ea7302d
[f2f1b2ced]: https://github.com/cockroachdb/cockroach/commit/f2f1b2ced
