## v24.3.16

Release Date: July 23, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v24-3-16-sql-language-changes">SQL language changes</h3>

- Added a session variable `initial_retry_backoff_for_read_committed` that controls the initial backoff duration when retrying an individual statement in an explicit `READ COMMITTED` transaction. A duration of `0` disables exponential backoff. If a statement in an explicit `READ COMMITTED` transaction is failing with the `40001` error `ERROR: restart transaction: read committed retry limit exceeded; set by max_retries_for_read_committed=...`, then you should set `initial_retry_backoff_for_read_committed` to a duration proportional to the typical execution time of the statement (in addition to also increasing `max_retries_for_read_committed`).
 [#148228][#148228]
- Added the metrics `sql.txn.auto_retry.count` and `sql.statements.auto_retry.count`, which count the number of automatic retries of SQL transactions and statements, respectively, within the database. These metrics differ from the related `txn.restarts.*` metrics, which count retryable errors emitted by the KV layer that must be retried. The new `sql.txn.auto_retry.count` and `sql.statements.auto_retry.count` metrics count auto-retry actions taken by the SQL layer in response to some of those retryable errors.
 [#148228][#148228]

<h3 id="v24-3-16-operational-changes">Operational changes</h3>

- Introduced a cluster setting, `sql.stats.error_on_concurrent_create_stats.enabled`, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default, `true`, maintains the previous behavior. Setting `sql.stats.error_on_concurrent_create_stats.enabled` to `false` will cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters.
 [#149850][#149850]

<h3 id="v24-3-16-bug-fixes">Bug fixes</h3>

- Fixed a data race in the `cloudstorage` sink.
 [#147161][#147161]
- Fixed an error in `crdb_internal.table_spans` that could occur when a table's schema had been dropped.
 [#148048][#148048]
- Fixed a bug where `libpq` clients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).
 [#148470][#148470]
- The `RESET ALL` statement no longer affects the following session variables:
  
  - `is_superuser`
  - `role`
  - `session_authorization`
  - `transaction_isolation`
  - `transaction_priority`
  - `transaction_status`
  - `transaction_read_only`
  
  This better matches PostgreSQL behavior for `RESET ALL`. In addition, the `DISCARD ALL` statement no longer errors when `default_transaction_use_follower_reads` is enabled.
 [#149431][#149431]
- Fixed a bug that would allow a race condition in foreign key cascades under `READ COMMITTED` and `REPEATABLE READ` isolation levels.
 [#150342][#150342]


[#150342]: https://github.com/cockroachdb/cockroach/pull/150342
[#148228]: https://github.com/cockroachdb/cockroach/pull/148228
[#149850]: https://github.com/cockroachdb/cockroach/pull/149850
[#147161]: https://github.com/cockroachdb/cockroach/pull/147161
[#148048]: https://github.com/cockroachdb/cockroach/pull/148048
[#148470]: https://github.com/cockroachdb/cockroach/pull/148470
[#149431]: https://github.com/cockroachdb/cockroach/pull/149431
