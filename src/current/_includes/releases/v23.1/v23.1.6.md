## v23.1.6

Release Date: July 24, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-1-6-bug-fixes">Bug fixes</h3>

- Fixed a bug in the [geospatial cartesian bounding box](../v23.1/spatial-indexes.html#how-cockroachdbs-spatial-indexing-works) index type that had incorrect behavior when comparing boxes with `NaN` values. [#105830][#105830]
- On [heavy write workloads](../v23.1/cockroach-workload.html) with fast disks, the deletion of obsolete LSM files could fall behind, causing high goroutine count. Pacing of obsolete file deletion now adapts based on recent deletion rate to avoid falling behind. [#105899][#105899]
- Fixed a bug introduced since v23.1.0 where the [`CREATE TABLE ... AS`](../v23.1/create-table-as.html) statement could crash if it queried the `crdb_internal.jobs` table. [#105925][#105925]
- Fixed a bug in v23.1.5 where [debug zips](../v23.1/cockroach-debug-zip.html) were empty in the `crdb_internal.cluster_settings.txt` file. Debug zips now properly show the information from `cluster_settings`. [#107105][#107105]
- Fixed a bug where some primary indexes would
incorrectly be treated internally as secondary indexes, which could cause schema change operations to fail. The bug could occur if [`ALTER PRIMARY KEY`](../v23.1/alter-table.html#alter-primary-key) was used on v21.1 or earlier, and the cluster was upgraded.[#106426][#106426]
- Extended the `cockroach debug doctor` to detect [indexes](../v23.1/indexes.html) which could potentially lose data by being dropped when a column is stored inside them and added a check inside [`DROP INDEX`](../v23.1/drop-index.html) to prevent dropping indexes with this problem to avoid data loss. [#106863][#106863]

<div class="release-note-contributors" markdown="1">

<h3 id="v23-1-6-contributors">Contributors</h3>

This release includes 6 merged PRs by 15 authors.

</div>

[#105830]: https://github.com/cockroachdb/cockroach/pull/105830
[#105849]: https://github.com/cockroachdb/cockroach/pull/105849
[#105899]: https://github.com/cockroachdb/cockroach/pull/105899
[#105925]: https://github.com/cockroachdb/cockroach/pull/105925
[#106863]: https://github.com/cockroachdb/cockroach/pull/106863
[#106426]: https://github.com/cockroachdb/cockroach/pull/106426
[#107105]: https://github.com/cockroachdb/cockroach/pull/107105

