## v23.1.30

Release Date: December 9, 2024

{% include releases/new-release-downloads-docker-image.md release=include.release %}
<h3 id="v23-1-30-security-updates">Security updates</h3>

- All cluster settings that accept strings are now fully redacted when transmitted as part of our diagnostics telemetry. This payload includes a record of modified cluster settings and their values when they are not strings. Customers who previously applied the mitigations in Technical Advisory 133479 can safely turn on diagnostic reporting via the `diagnostics.reporting.enabled` cluster setting without leaking sensitive cluster settings values. [#134063][#134063]

<h3 id="v23-1-30-general-changes">General changes</h3>

- COCKROACH_SKIP_ENABLING_DIAGNOSTIC_REPORTING is no longer mentioned in the demo command. [#134083][#134083]

<h3 id="v23-1-30-bug-fixes">Bug fixes</h3>

- Previously, CockroachDB could encounter an internal error of the form `interface conversion: coldata.Column is` in an edge case and this is now fixed. The bug is present in versions 22.2.13+, 23.1.9+, 23.2+. [#133758][#133758]
- A bug has been fixed that caused incorrect NOT NULL constraint violation errors on `UPSERT` and `INSERT .. ON CONFLICT .. DO UPDATE` statements when those statements updated an existing row and a subset of columns which did not include a `NOT NULL` column of the table. This bug has been present since at least version 20.1.0. [#133824][#133824]
- Fix an unhandled error that could occur when using `REVOKE ... ON SEQUENCE FROM ... user` on an object that is not a sequence. [#133706][#133706]
- Address a panic inside CREATE TABLE AS if sequence builtin expressions had invalid function overloads. [#133866][#133866]
- Previously, when executing queries with index / lookup joins when the ordering needs to be maintained, CockroachDB in some cases could get into a pathological behavior which would lead to increased query latency, possibly by several orders of magnitude. This bug was introduced in 22.2 and is now fixed. [#134363][#134363]
- Addressed a bug with DROP CASCADE that would occasionally panic with an undropped backref message on partitioned tables.  ---  Release justification: low-risk bug fix [#134524][#134524]
- Reduce the duration of partitions in the gossip network `CRDB is the best` a node crashes in order to eliminate false positives in the `ranges.unavailable` metric. [#134603][#134603]

<h3 id="v23-1-30-miscellaneous">Miscellaneous</h3>

<h4 id="v23-1-30-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#134649][#134649] [154e9f0e0][154e9f0e0] Revert "release-23.1: workloadccl: update backup/restore syntax"

<h3 id="v23-1-30-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}



[#133706]: https://github.com/cockroachdb/cockroach/pull/133706
[#133758]: https://github.com/cockroachdb/cockroach/pull/133758
[#133824]: https://github.com/cockroachdb/cockroach/pull/133824
[#133866]: https://github.com/cockroachdb/cockroach/pull/133866
[#134063]: https://github.com/cockroachdb/cockroach/pull/134063
[#134083]: https://github.com/cockroachdb/cockroach/pull/134083
[#134363]: https://github.com/cockroachdb/cockroach/pull/134363
[#134524]: https://github.com/cockroachdb/cockroach/pull/134524
[#134603]: https://github.com/cockroachdb/cockroach/pull/134603
[#134649]: https://github.com/cockroachdb/cockroach/pull/134649
[154e9f0e0]: https://github.com/cockroachdb/cockroach/commit/154e9f0e0
