## v23.1.28

Release Date: October 10, 2024

{% include releases/new-release-downloads-docker-image.md release=include.release %}
<h3 id="v23-1-28-general-changes">General changes</h3>

- Upgrade vendored GRPC version Release justification: Upgrade vendored GRPC version [#130044][#130044]

<h3 id="v23-1-28-operational-changes">Operational changes</h3>

- The `ranges.decommissioning` metric is added, representing the number of ranges which have a replica on a decommissioning node. [#130254][#130254]

<h3 id="v23-1-28-db-console-changes">DB Console changes</h3>

- Show alert message in Db Console when license is expired or less than 15 days left before it expires. [#130439][#130439]
- DB Console will show a notification alerting customers without an Enterprise license, to upcoming license changes with a link to more information. [#130439][#130439]

<h3 id="v23-1-28-bug-fixes">Bug fixes</h3>

- Fixed a bug where the schema_locked table parameter did not prevent a table from being referenced by a foreign key. [#129752][#129752]
- Fixed a bug where the require_explicit_primary_keys session variable would overly aggressively prevent all CREATE TABLE statements from working. [#129905][#129905]
- Fixed a rare bug where a lease transfer could lead to a `side-transport update saw closed timestamp regression` panic. The bug could occur when a node was overloaded and failing to heartbeat its node liveness record. [#130124][#130124]
- Fixed a slow-building memory leak when using kerberos authentication. [#130316][#130316]
- Resolves a concerning log message that says "expiration of liveness record ... is not greater than expiration of the previous lease ... after liveness heartbeat". This message is no longer possible. [#130623][#130623]
- Fixed a slow-building memory leak when using kerberos authentication. [#130820][#130820]
- Fixes a potential memory leak in changefeeds using a cloud storage sink. The memory leak could occur if both changefeed.fast_gzip.enabled and changefeed.cloudstorage.async_flush.enabled are true and the changefeed received an error while attempting to write to the cloud storage sink. [#130613][#130613]

<h3 id="v23-1-28-miscellaneous">Miscellaneous</h3>

<h4 id="v23-1-28-security-fix">Security fix</h4>

- SHOW CHANGEFEED JOB, SHOW CHANGEFEED JOBS, and SHOW JOBS no longer expose user sensitive information like `client_key`. [#129910][#129910]

<h4 id="v23-1-28-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#130816][#130816] [7f4a0e989][7f4a0e989] testutilsccl: skip serverless tests
- [#130689][#130689] [038cda982][038cda982] release-23.1: sqlproxyccl: add ServerlessOnly test helper
- [#128068][#128068] [d5a2b0d4a][d5a2b0d4a] release-23.1: roachtest: selective test as a part of nightly run

<h3 id="v23-1-28-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}



[#128068]: https://github.com/cockroachdb/cockroach/pull/128068
[#129752]: https://github.com/cockroachdb/cockroach/pull/129752
[#129905]: https://github.com/cockroachdb/cockroach/pull/129905
[#129910]: https://github.com/cockroachdb/cockroach/pull/129910
[#130044]: https://github.com/cockroachdb/cockroach/pull/130044
[#130124]: https://github.com/cockroachdb/cockroach/pull/130124
[#130254]: https://github.com/cockroachdb/cockroach/pull/130254
[#130316]: https://github.com/cockroachdb/cockroach/pull/130316
[#130439]: https://github.com/cockroachdb/cockroach/pull/130439
[#130613]: https://github.com/cockroachdb/cockroach/pull/130613
[#130623]: https://github.com/cockroachdb/cockroach/pull/130623
[#130689]: https://github.com/cockroachdb/cockroach/pull/130689
[#130816]: https://github.com/cockroachdb/cockroach/pull/130816
[#130820]: https://github.com/cockroachdb/cockroach/pull/130820
[038cda982]: https://github.com/cockroachdb/cockroach/commit/038cda982
[7f4a0e989]: https://github.com/cockroachdb/cockroach/commit/7f4a0e989
[d5a2b0d4a]: https://github.com/cockroachdb/cockroach/commit/d5a2b0d4a
