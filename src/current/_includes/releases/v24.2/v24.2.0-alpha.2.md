## v24.2.0-alpha.2

Release Date: July 10, 2024

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v24-2-0-alpha-2-general-changes">General changes</h3>

- An additional compression option, "none", was added to allow for the disabling of SSTable compression. This can be used with any of the three existing cluster settings that control SSTable compression. [#126508][#126508]

<h3 id="v24-2-0-alpha-2-sql-language-changes">SQL language changes</h3>

- Added the sql.auth.grant_option_inheritance.enabled cluster setting. The default value is true, which results in behavior that matches the existing behavior of CockroachDB. When set to false, then the GRANT OPTION is not inherited via role membership, which will prevent the descendant roles from being able to grant the privilege to others. The privilege itself is still inherited via role membership. [#125590][#125590]
- The pg_catalog.pg_attribute table now has a column named attishidden, which indicates if the column is NOT VISIBLE. [#126397][#126397]

<h3 id="v24-2-0-alpha-2-bug-fixes">Bug fixes</h3>

- Fixed a bug that could cause internal errors when a routine had polymorphic parameters and/or a polymorphic return type. The bug has existed since v22.2 when UDFs were introduced. [#123459][#123459]
- When showing enum types in `SHOW CREATE` output, we now format the name as a two-part name instead of a three-part name. This change makes it easier to apply the output with enum types, to other databases. [#125996][#125996]
- When altering the data type of columns with the hidden attribute, we now preserve that in the alter column. Also, we now allow type alterations for columns with ON UPDATE/DEFAULT expressions. [#126033][#126033]
- Fixed a bug where a user-defined function that shared a name with a builtin function would not be resolved, even if it had higher precedence from the search_path variable. [#126281][#126281]
- Expressions of type `BYTES[]` are now correctly formatted in `pg_catalog` tables. [#126297][#126297]
- Fixed a bug that could cause spurious user permission errors when multiple databases shared a common schema with a routine referencing a table. The bug has existed since UDFs were introduced in v22.2. [#126349][#126349]
- Hidden columns are now included in the pg_catalog.pg_index(indkey) column. [#126397][#126397]
- Fixed postgres incompatibility bug when inputting public as user name for builtin functions such as has_database_privilege and has_schema_privilege. [#126211][#126211]
- Fixed bug where we restore a database with a composite type. [#126351][#126351]
- Fixed a bug when creating partial statistics using extremes (which is disabled by default) where it would occasionally use incorrect extreme values and collect no stats. This occurs when outer buckets were added to the previous histogram to account for extra distinct count. [#126403][#126403]
- ALTER ROLE events in the DB Console event log now render correctly when the event does not contain any role options. [#126354][#126354]
- DROP REGION can fail if any tables under a given database have indexes on expressions. [#126555][#126555]

<h3 id="v24-2-0-alpha-2-performance-improvements">Performance improvements</h3>

- Starting a cockroach process will no longer flush buffered logs to configured logging sinks unless the process is running under systemd, where cockroach runs with the `NOTIFY_SOCKET` environment variable. [#125971][#125971]

<h3 id="v24-2-0-alpha-2-miscellaneous">Miscellaneous</h3>

<h4 id="v24-2-0-alpha-2-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#125905][#125905] [5884ff568][5884ff568] ccl,keys,sql,storage,util: restructure fuzz tests (Nukit Tailor <nukit.tailor@cockroachlabs.com>)
- [#126270][#126270] [9593896c3][9593896c3] roachtest/test-selector: capture infra flake information in query (Bhaskarjyoti Bora <bhaskar.bora@cockroachlabs.com>)
- [#126368][#126368] [d2804f0e8][d2804f0e8] drt: add workload-large case for datadog command (Vidit Bhat <vidit.bhat@cockroachlabs.com>)
- [#126393][#126393] [efd597f49][efd597f49] roachtest: use cockroach workload in kv test (Darryl Wong <darryl.wong@cockroachlabs.com>)
- [#125648][#125648] [8f5537acd][8f5537acd] roachtest: support custom workload node CPU sizes (Darryl Wong <darryl.wong@cockroachlabs.com>)
- [#125648][#125648] [1756b05fa][1756b05fa] roachtest: support custom workload node CPU sizes (Darryl Wong <darryl.wong@cockroachlabs.com>)
- [#125648][#125648] [24f84bcb2][24f84bcb2] roachtest: support custom workload node CPU sizes (Darryl Wong <darryl.wong@cockroachlabs.com>)

<h3 id="v24-2-0-alpha-2-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v24-2-0-alpha-2-contributors">Contributors</h3>

This release includes 130 merged PRs by 42 authors.
We would like to thank the following contributors from the CockroachDB community:

- Darryl Wong (first-time contributor, CockroachDB team member)
- David Hartunian (first-time contributor, CockroachDB team member)
- Ibrahim Kettaneh (first-time contributor, CockroachDB team member)
- Nukit Tailor (first-time contributor, CockroachDB team member)
- Xiaochen Cui (first-time contributor)

</div>

[#123459]: https://github.com/cockroachdb/cockroach/pull/123459
[#125590]: https://github.com/cockroachdb/cockroach/pull/125590
[#125648]: https://github.com/cockroachdb/cockroach/pull/125648
[#125905]: https://github.com/cockroachdb/cockroach/pull/125905
[#125971]: https://github.com/cockroachdb/cockroach/pull/125971
[#125996]: https://github.com/cockroachdb/cockroach/pull/125996
[#126033]: https://github.com/cockroachdb/cockroach/pull/126033
[#126211]: https://github.com/cockroachdb/cockroach/pull/126211
[#126270]: https://github.com/cockroachdb/cockroach/pull/126270
[#126281]: https://github.com/cockroachdb/cockroach/pull/126281
[#126297]: https://github.com/cockroachdb/cockroach/pull/126297
[#126349]: https://github.com/cockroachdb/cockroach/pull/126349
[#126351]: https://github.com/cockroachdb/cockroach/pull/126351
[#126354]: https://github.com/cockroachdb/cockroach/pull/126354
[#126368]: https://github.com/cockroachdb/cockroach/pull/126368
[#126393]: https://github.com/cockroachdb/cockroach/pull/126393
[#126397]: https://github.com/cockroachdb/cockroach/pull/126397
[#126403]: https://github.com/cockroachdb/cockroach/pull/126403
[#126508]: https://github.com/cockroachdb/cockroach/pull/126508
[#126555]: https://github.com/cockroachdb/cockroach/pull/126555
[1756b05fa]: https://github.com/cockroachdb/cockroach/commit/1756b05fa
[24f84bcb2]: https://github.com/cockroachdb/cockroach/commit/24f84bcb2
[5884ff568]: https://github.com/cockroachdb/cockroach/commit/5884ff568
[8f5537acd]: https://github.com/cockroachdb/cockroach/commit/8f5537acd
[9593896c3]: https://github.com/cockroachdb/cockroach/commit/9593896c3
[d2804f0e8]: https://github.com/cockroachdb/cockroach/commit/d2804f0e8
[efd597f49]: https://github.com/cockroachdb/cockroach/commit/efd597f49
