## v25.4.0

Release Date: November 3, 2025

With the release of CockroachDB v25.4, we've added new capabilities to help you migrate, build, and operate more efficiently.

For a summary of the most significant changes, refer to [Feature Highlights](#v25-4-0-feature-highlights), which contains the following categories:

  - [SQL](#v25-4-0-sql)
  - [Security](#v25-4-0-security)
  - [Observability](#v25-4-0-observability)
  - [CockroachDB Cloud](#v25-4-0-cloud)

Before [upgrading to CockroachDB v25.4]({% link v25.4/upgrade-cockroach-version.md %}), be sure to also review the following [Upgrade Details](#v25-4-0-upgrade-details):

  - [Backward-incompatible changes](#v25-4-0-backward-incompatible-changes)
  - [Features that require upgrade finalization](#v25-4-0-features-that-require-upgrade-finalization)
  - [Key cluster setting changes](#v25-4-0-key-cluster-setting-changes)
  - [Deprecations] (#v25-4-0-deprecations)

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-4-0-feature-highlights">Feature Highlights</h3>

This section summarizes the most significant user-facing changes in v25.4.0 and other features recently made available to CockroachDB users across versions. For a complete list of features and changes in v25.4, including bug fixes and performance improvements, refer to the [release notes]({% link releases/index.md %}#testing-releases) for v25.4 testing releases. You can also search the docs for sections labeled [New in v25.4](https://www.cockroachlabs.com/docs/search?query=New+in+v25.4).

<div id="feature-highlights">

<h4 id="v25-4-0-sql">SQL</h4>

<table>
 <thead>
  <tr>
   <th class="center-align" colspan="1" rowspan="2">Feature</th>
   <th class="center-align" colspan="5" rowspan="1">Availability</th>
  </tr>
  <tr>
    <th colspan="1" rowspan="1">Ver.</th>
    <th colspan="1" rowspan="1" style="white-space: nowrap;">Self-hosted</th>
    <th colspan="1" rowspan="1">Advanced</th>
    <th colspan="1" rowspan="1">Standard</th>
    <th colspan="1" rowspan="1">Basic</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <p class="feature-summary">Vector Indexing Improved and Generally Available</p>
    <p class="feature-description">
      CockroachDB's <a href="{% link v25.4/vector-indexes.md %}">vector indexing</a> capabilities are now generally available, promoting production-ready similarity search for AI and machine learning workloads from Preview to GA. This release brings critical operational improvements while maintaining the distributed architecture advantages that distinguish CockroachDB from specialized vector databases and PostgreSQL with pgvector.
    </p>
    <p class="feature-description">
      The standout v25.4 improvement is <strong>online table backfills</strong>: adding vector indexes to tables with existing data no longer requires taking the table offline during the backfill process. This eliminates downtime when adopting vector search capabilities, enabling seamless integration of AI features into live production systems without service interruption.
    </p>
    <p class="feature-description">Key capabilities:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li>Online table backfills: Add vector indexes without service interruption</li>
      <li>Distributed horizontal scaling: Automatically partition vector indexes across nodes as data grows, unlike single-node PostgreSQL pgvector</li>
      <li>Incremental index maintenance: No background rebuilds required when inserting or updating vectors</li>
      <li>Multiple distance metrics: L2 distance, cosine distance, and inner product for diverse ML workloads</li>
      <li>pgvector compatibility: Standard PostgreSQL vector operations and SQL semantics</li>
      <li>Unified architecture: Combine vector search with operational data, transactions, and consistency</li>
    </ul>
    <p class="feature-description">
      Vector indexing is now enabled by default (<code>feature.vector_index.enabled = true</code>), ready for production AI workloads including semantic search, retrieval-augmented generation, recommendation systems, and content similarity matching.
    </p>
   </td>
   <td>25.4</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
  </tr>
  <tr>
   <td>
    <p class="feature-summary">Stable SQL API and Controlled Access to Unsupported crdb_internal Tables</p>
    <p class="feature-description">
      CockroachDB introduces a stable, well-defined SQL API for <a href="{% link v25.4/crdb-internal.md %}#access-control">system introspection</a>. This API enables customers and third-party tools to safely and reliably query cluster metadata and performance data in production environments.
    </p>
   </td>
   <td>25.4</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
  </tr>
 </tbody>
</table>

<h4 id="v25-4-0-security">Security</h4>

<table>
 <thead>
  <tr>
   <th class="center-align" colspan="1" rowspan="2">Feature</th>
   <th class="center-align" colspan="5" rowspan="1">Availability</th>
  </tr>
  <tr>
    <th colspan="1" rowspan="1">Ver.</th>
    <th colspan="1" rowspan="1" style="white-space: nowrap;">Self-hosted</th>
    <th colspan="1" rowspan="1">Advanced</th>
    <th colspan="1" rowspan="1">Standard</th>
    <th colspan="1" rowspan="1">Basic</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <p class="feature-summary">Automatic Role Synchronization with JWT and OIDC Authentication (Preview)</p>
    <p class="feature-description">
      CockroachDB now automatically synchronizes user role memberships based on group claims from your identity provider (IdP), eliminating manual role management for SSO users. When users authenticate via OIDC for DB Console or JWT for SQL clients, CockroachDB automatically grants roles that match their IdP groups and revokes roles that no longer apply.
    </p>
    <p class="feature-description">
      Additionally, JWT authentication now supports automatic user provisioning, creating SQL users on their first login without requiring pre-configuration. This streamlines onboarding for organizations managing users through external identity providers like Okta, Google, Azure AD, or Keycloak.
    </p>
    <p class="feature-description">Key capabilities:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li>OIDC Authorization (DB Console): Automatically sync roles from ID tokens, access tokens, or userinfo endpoints</li>
      <li>JWT Authorization (SQL clients): Automatically sync roles from JWT group claims or userinfo endpoints</li>
      <li>JWT User Provisioning: Auto-create SQL users on first authentication with proper audit tagging</li>
      <li>Security-first design: Empty group lists block login; role changes apply on every authentication</li>
    </ul>
    <p class="feature-description">
      This feature works with both CockroachDB Cloud Advanced and self-hosted clusters, supporting LDAP, OIDC, and JWT authentication methods.
    </p>
   </td>
   <td>25.4</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
  </tr>
 </tbody>
</table>

<h4 id="v25-4-0-observability">Observability</h4>

<table>
 <thead>
  <tr>
   <th class="center-align" colspan="1" rowspan="2">Feature</th>
   <th class="center-align" colspan="5" rowspan="1">Availability</th>
  </tr>
  <tr>
    <th colspan="1" rowspan="1">Ver.</th>
    <th colspan="1" rowspan="1" style="white-space: nowrap;">Self-hosted</th>
    <th colspan="1" rowspan="1">Advanced</th>
    <th colspan="1" rowspan="1">Standard</th>
    <th colspan="1" rowspan="1">Basic</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <p class="feature-summary">Transaction Diagnostic Bundles for Comprehensive SQL Tracing</p>
    <p class="feature-description">
      CockroachDB now supports <a href="{% link v25.4/transaction-diagnostics.md %}">Transaction Diagnostic Bundles</a>, enabling Cockroach Labs Support to capture and analyze a complete trace of an entire SQL transaction not just individual statements.

      This feature extends the existing Statement Diagnostic Bundle capability to provide a holistic view of multi-statement transactions, simplifying the diagnosis of complex customer issues during support incidents.
    </p>
    <p class="feature-description">Each Transaction Diagnostic Bundle includes:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li>A Jaeger trace and text trace of the full transaction execution path.</li>
      <li>Individual Statement Diagnostic Bundles for each statement executed within the transaction.</li>
    </ul>
   </td>
   <td>25.4</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
  </tr>
  <tr>
   <td>
    <p class="feature-summary">Structured and Consistent Logging Channels</p>
    <p class="feature-description">
      CockroachDB has updated structured and consistent <a href="{% link v25.4/logging-overview.md %}#logging-channels">logging channels</a> across the system to improve log discoverability, production observability, and support troubleshooting.
    </p>
    <p class="feature-description">New channels introduced:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li><a href="{% link v25.4/logging-overview.md %}#changefeed">CHANGEFEED</a> – dedicated channel for Change Data Capture (CDC) logs, previously routed to DEV and TELEMETRY.</li>
      <li><a href="{% link v25.4/logging-overview.md %}#kv_exec">KV_EXEC</a> – channel for KV execution logs, separated from general distribution logs.</li>
    </ul>
    <p class="feature-description">Rerouted existing logs:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li><code>sampled_query</code> and <code>sampled_transaction</code> logs moved from TELEMETRY to <a href="{% link v25.4/logging-overview.md %}#sql_exec">SQL_EXEC</a> for better categorization.</li>
    </ul>
   </td>
   <td>25.4</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
   <td class="icon-center">{% include icon-no.html %}</td>
  </tr>
 </tbody>
</table>

<h4 id="v25-4-0-cloud">CockroachDB Cloud</h4>

<table>
 <thead>
  <tr>
   <th class="center-align" colspan="1" rowspan="2">Feature</th>
   <th class="center-align" colspan="5" rowspan="1">Availability</th>
  </tr>
  <tr>
    <th colspan="1" rowspan="1">Ver.</th>
    <th colspan="1" rowspan="1" style="white-space: nowrap;">Self-hosted</th>
    <th colspan="1" rowspan="1">Advanced</th>
    <th colspan="1" rowspan="1">Standard</th>
    <th colspan="1" rowspan="1">Basic</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <p class="feature-summary">Metrics Viewer Role for CockroachDB Cloud</p>
    <p class="feature-description">
      This release introduces the <a href="{% link cockroachcloud/authorization.md %}#metrics-viewer">Metrics Viewer role</a> in CockroachDB Cloud, which provides dedicated permissions for collecting metrics and viewing insights. The role enhances security by enabling granular access to cluster performance data.

      The Metrics Viewer role provides read-only access to cluster metrics and insights, without administrative or data modification privileges.
    </p>
    <p class="feature-description">Key benefits:</p>
    <ul class="feature-description" style="font-size: 16px;">
      <li>Improved Security: Enables the principle of least privilege by allowing users or services to monitor cluster performance without broader access to sensitive data or configuration.</li>
      <li>Targeted Access: Provides focused access to operational metrics, empowering teams to monitor health and performance efficiently.</li>
      <li>Enhanced Collaboration: Facilitates secure collaboration by allowing different teams (e.g., SREs, developers) to access relevant metrics without over-provisioned permissions.</li>
    </ul>
    <p class="feature-description">When combined with the <a href="{% link cockroachcloud/authorization.md %}#cluster-developer">Cluster Developer role</a>, users effectively gain 'Power Developer'-like capabilities, allowing them to build applications and monitor performance while maintaining clear privilege separation for security.</p>
   </td>
   <td>All<sup>*</sup></td>
   <td class="icon-center">{% include icon-no.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
   <td class="icon-center">{% include icon-yes.html %}</td>
  </tr>
 </tbody>
</table>

{% include releases/v25.4/feature-detail-key.html %}

</div>

<h3 id="v25-4-0-upgrade-details">Upgrade Details</h3>

Before you upgrade, review these changes and other information about the new major version.

<a name="v25-4-0-backward-incompatible-changes"></a>

<h4 id="v25-4-0-backward-incompatible-changes">Backward-incompatible changes</h4>

{% include releases/v25.4/backward-incompatible.md %}

<a name="v25-4-0-features-that-require-upgrade-finalization"></a>

<h4 id="v25-4-0-features-that-require-upgrade-finalization">Features that require upgrade finalization</h4>

{% include releases/v25.4/upgrade-finalization.md %}

<a name="v25-4-0-cluster-settings"></a>

<h4 id="v25-4-0-key-cluster-setting-changes">Key cluster setting changes</h4>

{% include releases/v25.4/cluster-setting-changes.md %}

<a name="v25-4-0-deprecations"></a>

<h4 id="v25-4-0-deprecations">Deprecations</h4>

{% include releases/v25.4/deprecations.md %}