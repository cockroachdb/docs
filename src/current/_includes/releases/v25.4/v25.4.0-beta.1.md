## v25.4.0-beta.1

Release Date: October 1, 2025

{% include releases/new-release-downloads-docker-image.md release=include.release %}

<h3 id="v25-4-0-beta-1-sql-language-changes">SQL language changes</h3>

- The logical cluster now uses an external connection and automatically updates its configuration when that connection changes. [#149261][#149261]
- Included `num_txn_retries` and `num_txn_auto_retries` into the `crdb_internal.{cluster,node}_queries` virtual tables as well as output of SHOW QUERIES. These columns, when not NULL, have the same information as `num_retries` and `num_auto_retries` columns of `crdb_internal.{cluster,node}_transactions` virtual tables for the same transaction in which the active query is executed. [#149503][#149503]
- Tables with vector indexes will no longer be taken offline while the vector index builds. [#151074][#151074]
- Introduced the unimplemented `SHOW INSPECT ERRORS` statement. [#151674][#151674]
- Added the `crdb_internal.request_transaction_bundle` which allows users to request a transaction diagnostics bundle for a specified transaction fingerprint ID:

**Function signature**

~~~sql
crdb_internal.request_transaction_bundle(
  transaction_fingerprint_id: string,
  sampling_probability: float,
  min_execution_latency: interval,
  expires_after: interval,
  redacted: bool
) -> (request_id: int, created: bool)
~~~

**Parameters**

- `transaction_fingerprint_id`: A hex-encoded ID of the transaction fingerprint to capture.
- `sampling_probability`: A probability value (between 0 and 1) for sampling whether a transaction bundle should be recorded.
- `min_execution_latency`: The minimum execution time required for the transaction to be considered. If `sampling_probability` is non-zero, this value must also be non-zero.
- `expires_after`: The duration for which the request remains active. A value of 0 keeps the request open until fulfilled or deleted.
- `redacted`: Specifies whether the resulting bundle should be redacted.

**Return values**

- `request_id`: The ID of the generated request, or `NULL` if the request could not be created.
- `created`: Returns `true` if the request is successfully created, or `false` if the specified fingerprint ID does not exist.

The fingerprint ID must exist in `crdb_internal.transaction_statistics`, which currently serves as the system of record for transaction fingerprints.

To use this built-in, the user must have either `VIEWACTIVITY` or `VIEWACTIVITYREDACTED` privileges. If the user has only `VIEWACTIVITYREDACTED`, only redacted bundles can be requested. [#153608][#153608]
- Implemented the `pg_get_function_arg_default` builtin function. This also causes the `information_schema.parameters(parameter_default)` column to be populated correctly. [#153625][#153625]

<h3 id="v25-4-0-beta-1-operational-changes">Operational changes</h3>

- Removed the `bulkio.backup.deprecated_full_backup_with_subdir.enabled` cluster setting, since backups will now fail if this is set to true. [#153628][#153628]
- Raised the cache size for the storage engine's block cache to 256 MiB. Note that production systems should always configure this setting. [#153739][#153739]
- In an upcoming release, we're deprecating the bespoke restore and import event logs. For any customer that relies on those logs, we can maintain UX parity by plumbing the sql user that owns the job to the status change event log. [#153889][#153889]
- The `incremental_location` option is now deprecated and will be removed in a future release. This feature was added so customers could define different TTL policies for incremental backups vs full backups. Users can still do this since incremental backups are by default stored in a distinct directory relative to full backups ({collection_root}/incrementals). [#153890][#153890]

<h3 id="v25-4-0-beta-1-db-console-changes">DB Console changes</h3>

- In the DB Console, the **Active Executions** table on the Statements and Transactions pages now includes a new **Isolation Level** column. The Sessions page also includes a new **Default Isolation Level** column. [#153617][#153617]

<h3 id="v25-4-0-beta-1-bug-fixes">Bug fixes</h3>

- Fixed a bug where a CockroachDB node could crash when executing DO statements that contain user-defined types (possibly non-existing) in non-default configuration. [#151849][#151849]
- Fixed a deadlock in `DROP COLUMN CASCADE` operations when dropping columns referenced by `STORED` computed columns. [#153683][#153683]
- Fixed a bug where `ALTER POLICY` was incorrectly dropping dependency tracking for functions, sequences, or types in policy expressions. [#153787][#153787]
- Fixed a bug where we would not show the pgwire `RowDescription` for `EXECUTE` statements that were themselves prepared using the pgwire `Parse` command. [#153905][#153905]
- Fixed a runtime error that could be hit if a new secondary index had a name collision with a primary index. [#153986][#153986]

<h3 id="v25-4-0-beta-1-miscellaneous">Miscellaneous</h3>

- Fixed a bug where the presence of duplicate temporary tables in a backup caused the restore to fail with a `restoring table desc and namespace entries: table already exists` error. Informs: #153722 [#153724][#153724]


[#153739]: https://github.com/cockroachdb/cockroach/pull/153739
[#153889]: https://github.com/cockroachdb/cockroach/pull/153889
[#151849]: https://github.com/cockroachdb/cockroach/pull/151849
[#153683]: https://github.com/cockroachdb/cockroach/pull/153683
[#151674]: https://github.com/cockroachdb/cockroach/pull/151674
[#149503]: https://github.com/cockroachdb/cockroach/pull/149503
[#151074]: https://github.com/cockroachdb/cockroach/pull/151074
[#153628]: https://github.com/cockroachdb/cockroach/pull/153628
[#149261]: https://github.com/cockroachdb/cockroach/pull/149261
[#153890]: https://github.com/cockroachdb/cockroach/pull/153890
[#153905]: https://github.com/cockroachdb/cockroach/pull/153905
[#153608]: https://github.com/cockroachdb/cockroach/pull/153608
[#153617]: https://github.com/cockroachdb/cockroach/pull/153617
[#153787]: https://github.com/cockroachdb/cockroach/pull/153787
[#153986]: https://github.com/cockroachdb/cockroach/pull/153986
[#153724]: https://github.com/cockroachdb/cockroach/pull/153724
[#153625]: https://github.com/cockroachdb/cockroach/pull/153625
