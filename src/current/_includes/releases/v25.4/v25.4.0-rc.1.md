## v25.4.0-rc.1

Release Date: October 22, 2025

{% include releases/release-downloads-2025.md release=include.release %}

<h3 id="v25-4-0-rc-1-sql-language-changes">SQL language changes</h3>

- Changed scan misestimate logging gated behind
  `sql.log.scan_row_count_misestimate.enabled` to use structured logging
  including the table and index being scanned, the estimated and actual
  row counts, the time since the last table stats collection, and the
  table's estimated staleness. [#155123][#155123]
- Added a default-off cluster setting
  (`sql.log.scan_row_count_misestimate.enabled`) that enables logging a
  warning on the gateway node when optimizer estimates for scans are
  inaccurate. The log message includes the table and index being scanned,
  the estimated and actual row counts, the time since the last table stats
  collection, and the table's estimated staleness. [#155123][#155123]
- Added the `INSPECT` command, which runs consistency validation check jobs against tables or databases and specified indexes. [#155441][#155441]
- Added the
  `bulkio.index_backfill.vector_merge_batch_size cluster` setting to control
  how many vectors to merge into a vector index per transaction during
  create operations. By default, this defaults to 3. [#155509][#155509]
- Vector indexing is now enabled by default. [#155561][#155561]

<h3 id="v25-4-0-rc-1-bug-fixes">Bug fixes</h3>

- Fixed a bug that caused internal errors for `INSERT .. ON CONFLICT .. DO UPDATE` statements when the target table had both a computed column and a `BEFORE` trigger. This bug was present since triggers were introduced in v24.3.0. [#155077][#155077]
- Disable a feature
  (`kv.lock_table.unreplicated_lock_reliability.split.enabled`) that could
  lead to a node crash. [#155366][#155366]
- Previously, we could corrupt the first bucket of
  table statistic histograms in certain cases, causing underestimates for
  range counts near the lower end of the domain, which is now fixed. [#155415][#155415]
- A potential deadlock during vector index
  creation has been corrected. [#155508][#155508]
- Added proper dependency handling when adding a constraint with `NOT VALID` that references a user-defined function (UDF). [#155528][#155528]


[#155123]: https://github.com/cockroachdb/cockroach/pull/155123
[#155441]: https://github.com/cockroachdb/cockroach/pull/155441
[#155508]: https://github.com/cockroachdb/cockroach/pull/155508
[#155509]: https://github.com/cockroachdb/cockroach/pull/155509
[#155561]: https://github.com/cockroachdb/cockroach/pull/155561
[#155077]: https://github.com/cockroachdb/cockroach/pull/155077
[#155366]: https://github.com/cockroachdb/cockroach/pull/155366
[#155415]: https://github.com/cockroachdb/cockroach/pull/155415
[#155528]: https://github.com/cockroachdb/cockroach/pull/155528
