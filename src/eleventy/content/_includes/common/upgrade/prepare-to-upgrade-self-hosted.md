Before beginning a major-version or patch upgrade:

1. Verify the overall health of your cluster using the [DB Console]({% link "{{ page.version.version }}/ui-cluster-overview-page.md" %}):
    - Under **Node Status**, make sure all nodes that should be live are listed as such. If any nodes are unexpectedly listed as `SUSPECT` or `DEAD`, identify why the nodes are offline and either restart them or [decommission]({% link "{{ page.version.version }}/node-shutdown.md" %}?filters=decommission#remove-nodes) them before beginning your upgrade. If there are `DEAD` and non-decommissioned nodes in your cluster, the upgrade cannot be finalized. If any node is not fully decommissioned, try the following:
        1. First, reissue the [decommission command]({% link "{{ page.version.version }}/node-shutdown.md" %}?filters=decommission#decommission-the-node). The second command typically succeeds within a few minutes.
        1. If the second decommission command does not succeed, [recommission]({% link "{{ page.version.version }}/node-shutdown.md" %}?filters=decommission#recommission-nodes) and then decommission it again. Before continuing the upgrade, the node must be marked as `decommissioned`.
    - Under **Replication Status**, make sure there are `0` under-replicated and unavailable ranges. Otherwise, performing a rolling upgrade increases the risk that ranges will lose a majority of their replicas and cause cluster unavailability. Therefore, it's important to identify and resolve the cause of range under-replication and/or unavailability before beginning your upgrade.
    - In the **Node List**, make sure all nodes are on the same version. Upgrade them to the cluster's current version before continuing. If any nodes are behind, this also indicates that the previous major-version upgrade may not be finalized.
    - In the **Metrics** dashboards, make sure [CPU]({% link "{{ page.version.version }}/common-issues-to-monitor.md" %}#cpu-usage), [memory]({% link "{{ page.version.version }}/common-issues-to-monitor.md" %}#database-memory-usage), and [storage]({% link "{{ page.version.version }}/common-issues-to-monitor.md" %}#storage-capacity) capacity are within acceptable values for each node. Nodes must be able to tolerate some increase in case the new version uses more resources for your workload. If any of these metrics is above healthy limits, consider [adding nodes]({% link "{{ page.version.version }}/cockroach-start.md" %}) to your cluster before beginning your upgrade.
1. Make sure your cluster is behind a [load balancer]({% link "{{ page.version.version }}/recommended-production-settings.md" %}#load-balancing), or your clients are configured to talk to multiple nodes. If your application communicates with only a single node, stopping that node to upgrade its CockroachDB binary will cause your application to fail.
1. {% dynamic_include page.version.version, "/storage/compaction-concurrency.md" %}
1. {% dynamic_include page.version.version, "/backups/recommend-backups-for-upgrade.md" %} Refer to [Restoring backups across versions]({% link "{{ page.version.version }}/restoring-backups-across-versions.md" %}#support-for-restoring-backups-into-a-newer-version).
1. Review the [{{ page.version.version }} Release Notes]({% link "releases/{{ page.version.version }}.md" %}), as well as the release notes for any skipped major version. Pay careful attention to the sections for backward-incompatible changes, deprecations, changes to default cluster settings, and features that are not available until the upgrade is finalized.
1. Optionally [disable auto-finalization](#disable-auto-finalization) to preserve the ability to roll back a major-version upgrade instead of finalizing it. If auto-finalization is disabled, a major-version upgrade is not complete until it is finalized.
