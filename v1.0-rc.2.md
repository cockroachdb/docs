---
title: What&#39;s New in v1.0-rc.2
toc: false
summary: Additions and changes in CockroachDB version v1.0-rc.2
---

## May 4, 2017

Get future release notes emailed to you:
<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

### Binaries

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
</div>

### General Changes

- [Diagnostics reporting](diagnostics-reporting.html) now anonymized query statistics. [#15491](https://github.com/cockroachdb/cockroach/pull/15491)

### SQL Language Changes

- Restrictions on schema changes in transactions with other statements have been relaxed. It is now possible to insert into a table in the same transaction that created it, provided there are no `FOREIGN KEY` or `INTERLEAVE` clauses. [#15511](https://github.com/cockroachdb/cockroach/pull/15511)
- The distributed SQL engine supports queries that internally generate rows with no columns. [#15420](https://github.com/cockroachdb/cockroach/pull/15420)
- New variables added to the [cluster-wide settings](cluster-settings.html): `server.declined_reservation_timeout`, `server.failed_reservation_timeout`, and `server.time_until_store_dead`. [#15581](https://github.com/cockroachdb/cockroach/pull/15581)

### Command-Line Interface Changes

- If the new flag `--listening-url-file` is given to `cockroach start`, the server will write its listening URL to this file at startup. This is useful in conjunction with the `--port=0` flag to have the server select an unused port automatically. [#15468](https://github.com/cockroachdb/cockroach/pull/15468)
- The `cockroach sql` shell no longer buffers all results in memory before printing them. [#15277](https://github.com/cockroachdb/cockroach/pull/15277)
- The log file is now flushed more reliably when a node exits. [#15531](https://github.com/cockroachdb/cockroach/pull/15531)
- A new flag `--max-offset` replaces the environment variable `COCKROACH_MAX_OFFSET`. [#15568](https://github.com/cockroachdb/cockroach/pull/15568)
- The `--raft-tick-interval` flag has been removed. [#15547](https://github.com/cockroachdb/cockroach/pull/15547)
- Surface errors encountered during certificate and key load. [#15655](https://github.com/cockroachdb/cockroach/pull/15655)

### Admin UI Changes

- The number of transactions that would be affected by a change in isolation level is now tracked. [#15234](https://github.com/cockroachdb/cockroach/pull/15234)
- Improved style of the single node and log pages. [#15486](https://github.com/cockroachdb/cockroach/pull/15486)
- The event log now refreshes automatically. [#15502](https://github.com/cockroachdb/cockroach/pull/15502)
- Add tooltips for graphs on overview page. [#15624](https://github.com/cockroachdb/cockroach/pull/15624)

### Bug Fixes

- Fixed a panic when a query returning a constant `NULL` used the new distributed execution engine. [#15530](https://github.com/cockroachdb/cockroach/pull/15530)
- Fixed two issues that could cause requests to get stuck indefinitely. [#15557](https://github.com/cockroachdb/cockroach/pull/15557) [#15573](https://github.com/cockroachdb/cockroach/pull/15573)
- Fixed a rare crash when extending table leases. [#15560](https://github.com/cockroachdb/cockroach/pull/15560)
- Fixed a crash when a transaction that uses `SAVEPOINT cockroach_restart` does something other than `ROLLBACK TO SAVEPOINT` after an error. [#15563](https://github.com/cockroachdb/cockroach/pull/15563)
- Fixed `RESTORE` for interleaved tables. [#15564](https://github.com/cockroachdb/cockroach/pull/15564)
- Return parse error instead of panic when constant typechecking fails. [#15636](https://github.com/cockroachdb/cockroach/pull/15636)
- Prevent persistent distsql and schema change errors after a node dies. [#15368](https://github.com/cockroachdb/cockroach/pull/15368)
- Adding a new column via `ALTER TABLE ADD COLUMN` with a `DEFAULT unique_rowid()` specification no longer generates duplicate values. [#15628](https://github.com/cockroachdb/cockroach/pull/15628)
- Fixed a consistency error in `BACKUP`. [#15642](https://github.com/cockroachdb/cockroach/pull/15642)

### Performance Improvements

- Reduced thrashing in gossip after a rolling restart. [#15533](https://github.com/cockroachdb/cockroach/pull/15533)
- `RESTORE` performs its pre-splitting less aggressively. [#15548](https://github.com/cockroachdb/cockroach/pull/15548)
- Improved memory accounting in distributed SQL. [#15595](https://github.com/cockroachdb/cockroach/pull/15595), [#15610](https://github.com/cockroachdb/cockroach/pull/15610), [#15623](https://github.com/cockroachdb/cockroach/pull/15623), [#15627](https://github.com/cockroachdb/cockroach/pull/15627)
- Queries using session-dependent variables (e.g. time conversions using the session's timezone) are now executed through the Distributed SQL engine. [#15628](https://github.com/cockroachdb/cockroach/pull/15628)

### Contributors

This release includes 77 merged PRs by 24 authors. We would like to thank the following contributors from the CockroachDB community:

- Dmitry Vorobev
- Richard Artoul
