## v23.1.0-beta.3

Release Date: April 19, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v23-1-0-beta-3-backward-incompatible-changes">Backward-incompatible changes</h3>

- Previously, if a search_path was specified in the connection string parameters, it would be treated case sensitively always. Now, in order to have the schema names in the search_path respect case, the name must be quoted with double quotes. [#101492][#101492]

<h3 id="v23-1-0-beta-3-sql-language-changes">SQL language changes</h3>

- Statements of type `SET ` are not longer displayed on the Insights page. [#101672][#101672]

<h3 id="v23-1-0-beta-3-operational-changes">Operational changes</h3>

- The amount of replication traffic in flight from a single Raft leader to a follower has been reduced from 256 MB to 32 MB, in order to reduce the chance of running out of memory during bulk write operations. This can be controlled via the environment variable `COCKROACH_RAFT_MAX_INFLIGHT_BYTES`. [#101508][#101508]

<h3 id="v23-1-0-beta-3-db-console-changes">DB Console changes</h3>

- Add option to select the trace rate for statement diagnostics collection. [#101762][#101762]
- Update Network Latency side nav name and Network Diagnostics page title to `Network`. Update the Advanced Debugging page title to `Advanced Debug`. [#101761][#101761]
- Add draining node as its own value on the overview page of DB Console, instead of counting as a dead node. [#101794][#101794]
- Add a time scale selector to the Diagnostics tab under the Statement Details page, make it possible to see bundles only from the selected period. [#101803][#101803]

<h3 id="v23-1-0-beta-3-bug-fixes">Bug fixes</h3>

- A bug has been fixed that caused internal errors when executing user-defined functions with empty bodies. This bug was only present in alpha pre-release versions of 23.1. [#101383][#101383]
- Restoring a backup with user defined schemas could occassionally fail due to incorrect schema ID resolution [#101310][#101310]
- The search_path session variable now supports schema names that have commas in them. This patch also fixes a bug with parsing the search_path if it was specified in the connection string and the search_path had a quote in it. [#101492][#101492]
- Fixed a bug existing from when user-defined functions were introduced that could cause a function call to resolve to the wrong function after changes to the schema search path. [#101513][#101513]
- CockroachDB 23.1.0 alpha and beta versions previously would panic on `start` command when `GOMEMLIMIT` env var was set and `--max-go-memory` flag wasn't specified, and this is now fixed. [#101565][#101565]
- A bug has been fixed that caused errors in test builds and potentially incorrect results in release builds when invoking a user-defined function with a subquery argument. This bug was only present in alpha pre-release versions of 23.1. [#101639][#101639]
- An internal error could occur when the enforce_home_region session setting is on and the input to the lookup join is a SELECT of scalar expressions (e.g. 1+1). This has been fixed. Also, subqueries with no home region now error out with enforce_home_region set. [#101504][#101504]
- Support has been added for erroring out point inserts and updates which write to a remote region of a table created with the REGIONAL BY ROW AS clause. [#101708][#101708]
- A bug has been fixed in the built-in functions `pg_get_indexdef` and `col_description` that could cause the functions to return errors if the user created tables named `pg_indexes` or `pg_attribute`, or if the user created a schema named `system` with a table named `comments`. This bug was only present on pre-release versions of 23.1. [#101690][#101690]
- Show Insights even when there is an issue while decoding contention information. [#101784][#101784]
- Show list of fingerprints used per index even when we hit the max size limit of the sql api. [#101785][#101785]

<h3 id="v23-1-0-beta-3-miscellaneous">Miscellaneous</h3>

<h4 id="v23-1-0-beta-3-changes-without-release-note-annotation">Changes without release note annotation</h4>

- [#101432][#101432] [9b4080616][9b4080616] kvtenant: move kv tenant connector out of ccl (Herko Lategan <herko.lategan@gmail.com>)

<h3 id="v23-1-0-beta-3-doc-updates">Doc updates</h3>

{% comment %}Docs team: Please add these manually.{% endcomment %}

<div class="release-note-contributors" markdown="1">

<h3 id="v23-1-0-beta-3-contributors">Contributors</h3>

This release includes 36 merged PRs by 15 authors.
We would like to thank the following contributors from the CockroachDB community:

- Mark Sirek (first-time contributor, CockroachDB team member)

</div>

[#101310]: https://github.com/cockroachdb/cockroach/pull/101310
[#101383]: https://github.com/cockroachdb/cockroach/pull/101383
[#101432]: https://github.com/cockroachdb/cockroach/pull/101432
[#101492]: https://github.com/cockroachdb/cockroach/pull/101492
[#101504]: https://github.com/cockroachdb/cockroach/pull/101504
[#101508]: https://github.com/cockroachdb/cockroach/pull/101508
[#101513]: https://github.com/cockroachdb/cockroach/pull/101513
[#101565]: https://github.com/cockroachdb/cockroach/pull/101565
[#101639]: https://github.com/cockroachdb/cockroach/pull/101639
[#101672]: https://github.com/cockroachdb/cockroach/pull/101672
[#101690]: https://github.com/cockroachdb/cockroach/pull/101690
[#101708]: https://github.com/cockroachdb/cockroach/pull/101708
[#101761]: https://github.com/cockroachdb/cockroach/pull/101761
[#101762]: https://github.com/cockroachdb/cockroach/pull/101762
[#101784]: https://github.com/cockroachdb/cockroach/pull/101784
[#101785]: https://github.com/cockroachdb/cockroach/pull/101785
[#101794]: https://github.com/cockroachdb/cockroach/pull/101794
[#101803]: https://github.com/cockroachdb/cockroach/pull/101803
[9b4080616]: https://github.com/cockroachdb/cockroach/commit/9b4080616
