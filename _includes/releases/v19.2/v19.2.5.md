<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This page lists additions and changes in v19.2.5 since v19.2.4.

- For a comprehensive summary of features in v19.2, see the [v19.2 GA release notes](v19.2.0.html).
- To upgrade to v19.2, see [Upgrade to CockroachDB v19.2](../v19.2/upgrade-cockroach-version.html)

{{site.data.alerts.callout_danger}}
{% include /v19.2/alerts/warning-a58932.md %}
{{site.data.alerts.end}}

{{site.data.alerts.callout_danger}}
{% include /v19.2/alerts/warning-a63162.md %}
{{site.data.alerts.end}}

<h3 id="v19.2.5-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.5.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.5.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.5.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.5.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v19.2.5-docker-image">Docker image</h3>

{% include copy-clipboard.html %}
~~~shell
$ docker pull cockroachdb/cockroach:v19.2.5
~~~

<h3 id="v19.2.5-security-updates">Security updates</h3>

- Non-licensed users are now able to add more principals to the special superuser role/group `admin`. [Creation of additional roles](../v19.2/create-role.html) is still a licensed feature. [#45395][#45395] {% comment %}doc{% endcomment %}

<h3 id="v19.2.5-sql-language-changes">SQL language changes</h3>

- The SQL:2008 syntax `OFFSET <x> ROWS` and `FETCH FIRST <y> ROWS ONLY` now accepts parameter values. [#45166][#45166] {% comment %}doc{% endcomment %}
- It is now possible to use [`GRANT`](../v19.2/grant.html) and [`REVOKE`](../v19.2/revoke.html) to add users to the `admin` role without a valid license. This change aims to enable use of the Admin UI and other privileged features without a license. [#45395][#45395] {% comment %}doc{% endcomment %}

<h3 id="v19.2.5-command-line-changes">Command-line changes</h3>

- [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) now includes secondary log files (e.g., the RocksDB logs) in the main log directory. Log files in alternate log directories, if different from the main log directory, are not included. [#45202][#45202] {% comment %}doc{% endcomment %}
- [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) now displays its progress differently on the terminal. [#45207][#45207]
- [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) now properly supports special characters in database and table names. [#45207][#45207]
- [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) will now apply the `--timeout` parameters to the SQL queries it performs. Previously, there was no timeout, which could cause `cockroach debug zip` to hang. [#45207][#45207] {% comment %}doc{% endcomment %}
- [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) is now able to tolerate more forms of cluster unavailability. In case system ranges are unavailable, we recommend running `cockroach debug zip` on each node's address, to maximize useful data collection. [#45207][#45207]
- The `debug.zip` file generated by [`cockroach debug zip`](../v19.2/cockroach-debug-zip.html) now contains hex a representation of the marshaled jobs payload, progress, and table descriptors. [#46040][#46040]

<h3 id="v19.2.5-admin-ui-changes">Admin UI changes</h3>

- The "Log file list" endpoint now includes secondary log files (e.g., the RocksDB logs) in the main log directory. Log files in alternate log directories, if different from the main log directory, are not included. [#45202][#45202] {% comment %}doc{% endcomment %}

<h3 id="v19.2.5-bug-fixes">Bug fixes</h3>

- Fixed a "cannot map variable" error that could occur in rare cases involving joins. [#44859][#44859]
- Fixed a bug where [`DROP INDEX`](../v19.2/drop-index.html) jobs waiting for GC TTL might be erroneously deleted early. Usually a `DROP INDEX` job would appear as "waiting for GC TTL" to indicate that the data was still on disk. However, this bug might have caused the job to be deleted before the data was actually removed from disk. [#44873][#44873]
- Fixed occasional "concurrent map write" crash. [#44874][#44874]
- Previously, CockroachDB would return an internal error when a [`substring` function](../v19.2/functions-and-operators.html#string-and-byte-functions) with non-`INT8` start and length arguments was executed with the [vectorized execution engine](../v19.2/vectorized-execution.html). This is now fixed. [#44902][#44902]
- Fixed incorrect deduplication of impure expressions (e.g., [`gen_random_uuid`](../v19.2/functions-and-operators.html#id-generation-functions)) in projections and default values. [#44915][#44915]
- Previously, CockroachDB could return an internal error on the queries that return `INT` columns when the default integer size has been changed. This is now fixed. [#44980][#44980]
- Previously, CockroachDB would return an internal error when a merge join operation was performed with the [vectorized execution engine](../v19.2/vectorized-execution.html) in the case when two sides of the join had comparable but different types in the equality columns (e.g., `INT2` on the left and `INT4` on the right). This is now fixed. [#45032][#45032]
- Previously, CockroachDB could crash when running [`EXPLAIN (VEC)`](../v19.2/explain.html#vec-option) in some edge cases. Now, an internal error is returned instead. [#45004][#45004]
- Fixed an internal error that could occur when [`NULLIF`](../v19.2/scalar-expressions.html#nullif-expressions) was called with one null argument. [#45390][#45390]
- Some vectorized execution plans that used lookup joins with `DECIMAL`s would previously return incorrect results. This is now fixed. [#45548][#45548]
- AbortSpan records are now cleaned up more aggressively when it is known to be safe. [#45553][#45553]
- It is now possible to create [inverted indexes](../v19.2/inverted-indexes.html) on columns whose names are mixed-case. [#45660][#45660]
- Fixed a bug causing distributed deadlock detection between transactions to stall and fail to resolve a deadlock. [#45664][#45664]
- Fixed a bug where large ranges with slow send rates would hit the timeout in several storage system queues by making the timeout dynamic based on the current rate limit and the size of the data being sent. This affects several storage system queues: the Raft snapshot queue, the replication queue, and the merge queue. [#44952][#44952]
- Previously, drivers that did not truncate trailing zeroes for decimals in the binary format end up having inaccuracies of up to 10^4 during the decode step. Trailing zeroes are now truncated as appropriate. This fixes known incorrect decoding cases with Postgrex in Elixir. [#45670][#45670]
- Range garbage collection will now trigger based on a large abort span, adding defense-in-depth against ranges growing large and eventually unstable. [#45744][#45744]
- Previously, an internal error could occur in CockroachDB when executing queries that contained unordered synchronizers with the [vectorized execution engine](../v19.2/vectorized-execution.html). This is now fixed. [#45739][#45739]
- Previously, CockroachDB would crash when using a [window function](../v19.2/window-functions.html) with the `RANGE` mode of framing an `offset PRECEDING` or `offset FOLLOWING` boundary where the single column in an `ORDER BY` clause was also in the `PARTITION BY` clause. This is now fixed. [#45805][#45805]
- Previously, CockroachDB could crash when computing [window functions](../v19.2/window-functions.html) with the `RANGE` mode of framing when one of the bounds was either `offset PRECEDING` or `offset FOLLOWING` and there were `NULL` values in the single column of an `ORDER BY` clause. Additionally, `RANGE` mode bounds `0 PRECEDING` and `0 FOLLOWING` could have been handled incorrectly. This is now fixed. [#45805][#45805]
- When considering if a job should be orphaned, CockroachDB used to take the conservative approach when a descriptor ID pointing to non-existent descriptor was found. This caused jobs to hang and be garbage collected. We now disregard these IDs when considering if a job still has work to do. [#45895][#45895]
- The `--set` parameter for [`cockroach sql`](../v19.2/cockroach-sql.html) and [`cockroach demo`](../v19.2/cockroach-demo.html) is now able to properly override all client-side options, as advertised. [#46130][#46130]
- Expected errors from the [vectorized execution engine](../v19.2/vectorized-execution.html) are no longer mistakenly annotated as unexpected errors. [#46092][#46092]

<h3 id="v19.2.5-performance-improvements">Performance improvements</h3>

- Execution plans are now faster in some cases that involve [`IN`/`NOT IN`](../v19.2/scalar-expressions.html#set-membership) with an empty tuple, or [`= ANY`](../v19.2/scalar-expressions.html#multi-valued-comparisons) with an empty array. [#45213][#45213]
- Improved the selectivity estimation of some predicates containing `OR`, leading to better plan selection by the optimizer, in some cases. [#45972][#45972]
- Improved cardinality estimation in the optimizer for relations with a small number of rows. This may lead to the optimizer choosing a better query plan. [#45972][#45972]

<h3 id="v19.2.5-contributors">Contributors</h3>

This release includes 36 merged PRs by 15 authors.

[#44859]: https://github.com/cockroachdb/cockroach/pull/44859
[#44873]: https://github.com/cockroachdb/cockroach/pull/44873
[#44874]: https://github.com/cockroachdb/cockroach/pull/44874
[#44902]: https://github.com/cockroachdb/cockroach/pull/44902
[#44915]: https://github.com/cockroachdb/cockroach/pull/44915
[#44952]: https://github.com/cockroachdb/cockroach/pull/44952
[#44980]: https://github.com/cockroachdb/cockroach/pull/44980
[#45004]: https://github.com/cockroachdb/cockroach/pull/45004
[#45032]: https://github.com/cockroachdb/cockroach/pull/45032
[#45166]: https://github.com/cockroachdb/cockroach/pull/45166
[#45202]: https://github.com/cockroachdb/cockroach/pull/45202
[#45207]: https://github.com/cockroachdb/cockroach/pull/45207
[#45213]: https://github.com/cockroachdb/cockroach/pull/45213
[#45390]: https://github.com/cockroachdb/cockroach/pull/45390
[#45395]: https://github.com/cockroachdb/cockroach/pull/45395
[#45548]: https://github.com/cockroachdb/cockroach/pull/45548
[#45553]: https://github.com/cockroachdb/cockroach/pull/45553
[#45660]: https://github.com/cockroachdb/cockroach/pull/45660
[#45664]: https://github.com/cockroachdb/cockroach/pull/45664
[#45670]: https://github.com/cockroachdb/cockroach/pull/45670
[#45739]: https://github.com/cockroachdb/cockroach/pull/45739
[#45744]: https://github.com/cockroachdb/cockroach/pull/45744
[#45805]: https://github.com/cockroachdb/cockroach/pull/45805
[#45895]: https://github.com/cockroachdb/cockroach/pull/45895
[#45972]: https://github.com/cockroachdb/cockroach/pull/45972
[#46040]: https://github.com/cockroachdb/cockroach/pull/46040
[#46092]: https://github.com/cockroachdb/cockroach/pull/46092
[#46130]: https://github.com/cockroachdb/cockroach/pull/46130
[#46154]: https://github.com/cockroachdb/cockroach/pull/46154
