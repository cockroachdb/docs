<script>
  $(document).ready(function() {
    var $versionSwitcher = $('#version-switcher').find('ul.nav');
    var $maincontent = $('#main-content'), $contentcol = $('.content-col');
    var navgocoOptions = {
      caretHtml: '',
      accordion: true,
      openClass: 'active', // open
      save: false, // leave false or nav highlighting doesn't work right
      cookie: {
        name: 'navgoco',
        expires: false,
        path: '/'
      },
      slide: {
        duration: 150,
        easing: 'swing'
      }
    };

    $versionSwitcher.navgoco($.extend(navgocoOptions, {
      onToggleBefore: function() {
        $('#version-switcher').toggleClass('open');
      }
    }));

    $versionSwitcher.show();
  });
</script>
<div id="version-switcher">
  <ul class="nav" style="display: none">
    <li class="tier-1">
      <a href="#">
        Version: <span class="version-name">{{ page.version.name }}</span>
        <div class="arrow-down"></div>
      </a>
      <ul>
        {% for v in page.versions %}
        <li class="tier-2 {% if v.version == page.version %}active{% endif %}">
          <a
            {% if v.url %}href="{{ v.url | relative_url }}"
            {% else %}data-tooltip data-placement="right" data-container="body" title="This page does not exist in {{ v.version.version }}."
            {% endif %}>
              {{ v.version.name }}
              {% if v.version.tag %}({{ v.version.tag | capitalize }}){% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </li>
  </ul>
</div>

<script>
  $("#version-switcher").change(function () {
    location.href = $(this).val();
  });
</script>
