---
title: What&#39;s New in v2.1.0
toc: true
summary: Additions and changes in CockroachDB version v2.1.0.
---

## October 30, 2018

With the release of CockroachDB v2.1, weâ€™ve made significant performance improvements, added more cluster details to our Admin UI, expanded our PostgreSQL compatibility, and provided guidance for migrating to CockroachDB.  

- Read more about these changes in the [v2.1 blog post](https://www.cockroachlabs.com/blog/cockroachdb-2-1-release/).
- Check out a [summary of the most significant, user-facing changes](#summary).
- Then [upgrade to CockroachDB v2.1](../v2.1/upgrade-cockroach-version.html).

Get future release notes emailed to you:

<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

## Downloads

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

## Summary

This section summarizes the most significant, user-facing changes in v2.1.0. For a complete list of features and changes, including bug fixes and performance improvements, see the [release notes](index.html#testing-releases) for previous testing releases.

- [Enterprise Features](#enterprise-features)
- [Core Features](#core-features)
- [Backward-Incompatible Changes](#backward-incompatible-changes)
- [Known Limitations](#known-limitations)
- [Documentation Updates](#documentation-updates)

<style>
    table td:first-child {
        min-width: 225px;
    }
</style>

## Enterprise Features

These new features require an [enterprise license](../v2.1/enterprise-licensing.html). Register for a 30-day trial license [here](https://www.cockroachlabs.com/pricing/start-trial/).

Feature | Description
--------|------------
[Change Data Capture](../v2.1/change-data-capture.html) |  Change data capture (CDC) provides efficient, distributed, row-level change feeds into Apache Kafka for downstream processing such as reporting, caching, or full-text indexing. Use the [`CREATE CHANGEFEED`](../v2.1/create-changefeed.html) statement to create a new changefeed, which provides row-level change subscriptions.
[Encryption at Rest](../v2.1/encryption.html) | Encryption at Rest provides transparent encryption of a node's data on the local disk.
[`EXPORT`](../v2.1/export.html) | The `EXPORT` statement exports tabular data or the results of arbitrary SELECT statements to CSV files. Using the CockroachDB [distributed execution engine](../v2.1/architecture/sql-layer.html#distsql), `EXPORT` parallelizes CSV creation across all nodes in the cluster, making it possible to quickly get large sets of data out of CockroachDB in a format that can be ingested by downstream systems.

## Core Features

These new features are freely available in the core version and do not require an enterprise license.

### SQL

Feature | Description
--------|------------
[`ALTER TABLE ... ALTER TYPE`](../v2.1/alter-type.html) | The `ALTER TYPE` statement is part of [`ALTER TABLE`](../v2.1/alter-table.html) and changes a column's [data type](../v2.1/data-types.html).
[`ALTER COLUMN ... DROP STORED`](../v2.1/alter-column.html) | The `ALTER COLUMN` statement is part of `ALTER TABLE` and sets, changes, or drops a column's [`DEFAULT` constraint](../v2.1/default-value.html) or drops the [`NOT NULL` constraint](../v2.1/not-null.html). To convert a [computed column](../v2.1/computed-columns.html) into a regular column, use `ALTER COLUMN ... DROP STORED`.
[`CANCEL JOB`](../v2.1/cancel-job.html) | The `CANCEL JOB` statement can now be executed on long-running schema change jobs, causing them to terminate early and roll back.
[`CANCEL QUERIES`](../v2.1/cancel-query.html) | The `CANCEL QUERIES` variant of the `CANCEL QUERY` statement cancels multiple queries at once.
[`CANCEL SESSIONS`](../v2.1/cancel-session.html) | The `CANCEL SESSIONS` variant of the `CANCEL SESSION` statement lets you stop multiple long-running sessions. `CANCEL SESSION` will attempt to cancel the currently active query and end the session.
[`CREATE STATISTICS`](../v2.1/create-statistics.html) (Experimental) | The `CREATE STATISTICS` statement generates table statistics for the [cost-based optimizer](../v2.1/cost-based-optimizer.html) to use.
[`EXPLAIN (DISTSQL)`](../v2.1/explain.html#distsql-option) | The `DISTSQL` option generates a physical query plan for a query. Query plans provide information around SQL execution, which can be used to troubleshoot slow queries.
[`EXPLAIN ANALYZE`](../v2.1/explain-analyze.html) | The `EXPLAIN ANALYZE` statement executes a SQL query and returns a physical query plan with execution statistics.
[`SET` (session variable)](../v2.1/set-vars.html) | Added the following options: <ul><li>`distsql`: The query distribution mode for the current session. If `auto`, CockroachDB determines which queries are faster to execute if distributed across multiple nodes, and all other queries are run through the gateway node. `auto` is recommended. </li><li>`statement_timeout`: The amount of time a statement can run before being stopped.</li><li>`optimizer`: The mode in which a query execution plan is generated. If set to on, the cost-based optimizer is enabled by default and the heuristic planner will only be used if the query is not supported by the cost-based optimizer; if set to off, all queries are run through the legacy heuristic planner.</li><li>`extra_float_digits`: The number of digits displayed for floating-point values. Only values between `-15` and `3` are supported.</li></ul>
[`SHOW` (session variable)](../v2.1/show-vars.html) | Added the following options: <ul><li>`distsql`: The query distribution mode for the session. By default, CockroachDB determines which queries are faster to execute if distributed across multiple nodes, and all other queries are run through the gateway node.</li><li>`statment_timeout`: The amount of time a statement can run before being stopped.</li><li>`optimizer`: The mode in which a query execution plan is generated. If set to on, the cost-based optimizer is enabled by default and the heuristic planner will only be used if the query is not supported by the cost-based optimizer; if set to off, all queries are run through the legacy heuristic planner.</li><li>`extra_float_digits`: The number of digits displayed for floating-point values. Only values between `-15` and `3` are supported.</li></ul>
[`SHOW SESSIONS`](../v2.1/show-sessions.html) | A new column, `session_id`, has been added. The `session_id` is the ID of the connected session.
[`SHOW STATISTICS`](../v2.1/show-statistics.html) (Experimental) | The `SHOW STATISTICS` statement lists [table statistics](../v2.1/create-statistics.html) used by the [cost-based optimizer](../v2.1/cost-based-optimizer.html).

### Operations

Feature | Description
--------|------------
[Cost-Based Optimizer](../v2.1/cost-based-optimizer.html) | The cost-based optimizer seeks the lowest cost for a query, usually related to time. In versions 2.1 and later, CockroachDB's cost-based optimizer is enabled by default.
[Support Open Source Database Tools](../v2.1/third-party-database-tools.html) | This page lists third-party tools that work with CockroachDB.
[Controlling Leaseholder Location](../v2.1/configure-replication-zones.html#constrain-leaseholders-to-specific-datacenters) | Specify preferences for where a range's leaseholders should be placed to increase performance in some scenarios.
[Multi-Cluster Kubernetes Deployment](../v2.1/orchestrate-cockroachdb-with-kubernetes-multi-cluster.html) | This page shows you how to orchestrate a secure CockroachDB deployment across three [Kubernetes](http://kubernetes.io/) clusters, each in a different geographic region, using the [StatefulSet](http://kubernetes.io/docs/concepts/abstractions/controllers/statefulsets/) feature to manage the containers within each cluster and linking them together via DNS.
[Prometheus and Alertmanager](../v2.1/orchestrate-cockroachdb-with-kubernetes.html) | Kubernetes tutorials now feature steps on how to integrate with  with [Prometheus](https://prometheus.io/), an open source tool for storing, aggregating, and querying timeseries data, and set up [Alertmanager](https://prometheus.io/docs/alerting/alertmanager/).
[Distributed SQL](../v2.1/architecture/sql-layer.html#distsql) | Because CockroachDB is a distributed database, we've developed a Distributed SQL (DistSQL) optimization tool for some queries, which can dramatically speed up queries that involve many ranges. For DistSQL-compatible queries, each node does computations on the rows it contains, and then sends the results (instead of the entire rows) to the coordinating node. The coordinating node then aggregates the results from each node, and finally returns a single response to the client. For queries that cannot be distributed, the coordinating node receives all of the rows that match its query, and then performs any computations on the entire data set. The query distribution mode for the current session can be set using [`SET distsql = auto`](../v2.1/set-vars.html#supported-variables).
[Subqueries](../v2.1/subqueries.html#correlated-subqueries) | CockroachDB's [cost-based optimizer](../v2.1/cost-based-optimizer.html) supports several common types of correlated subqueries. A subquery is said to be "correlated" when it uses table or column names defined in the surrounding query.
[View Node Status](../v2.1/view-node-details.html) | The `cockroach node status` command can now be run even when majority of nodes are down. Running the command now shows an additional field: `is_available.`
[Replication Layer](../v2.1/architecture/replication-layer.html) | In addition to the rebalancing that occurs when nodes join or leave a cluster, leases and replicas are rebalanced automatically based on the relative load across the nodes within a cluster. Note that depending on the needs of your deployment, you can exercise additional control over the location of leases and replicas by [configuring replication zones](../v2.1/configure-replication-zones.html).
[`public` Role](../v2.1/roles.html) | All users now belong to the `public` role, to which you can [grant](../v2.1/grant.html) and [revoke](../v2.1/revoke.html) privileges.
Default Table Formatter | The `cockroach sql` command and other client commands that display SQL results now use the new table result formatter by default, replacing the previous formatter called `pretty`. This provides more compact and more reusable results.
[2.1 Rolling Upgrade Auto-finalization](../v2.1/upgrade-cockroach-version.html) | By default, as soon as all nodes are running the new version, the upgrade process will be **auto-finalized**. This will enable certain performance improvements and bug fixes introduced in v2.1. After finalization, however, it will no longer be possible to perform a rolling downgrade to v2.0. In the event of a catastrophic failure or corruption due to usage of new features requiring v2.1, the only option will be to start a new cluster using the old binary and then restore from one of the backups created prior to performing the upgrade.
[Prefer Local Networks](../v2.1/start-a-node.html)| Use the `--locality-advertise-addr` flag to specify the IP address/hostname and port to tell other nodes in specific localities to use. This flag is useful when running a cluster across multiple networks, where nodes in a given network have access to a private or local interface while nodes outside the network do not.
[Pipelining of Transactional Writes](../v2.1/architecture/transaction-layer.html#transaction-pipelining) | Transactional writes are pipelined when being replicated and when being written to disk, dramatically reducing the latency of transactions that perform multiple writes.

### Admin UI

Feature | Description
--------|------------
[User Authentication](../v2.1/admin-ui-access-and-navigate.html) | For secure clusters, only authorized users can access and view the Admin UI. For each user who should have access to the Admin UI for a secure cluster, [create a user with a password](../v2.1/create-user.html). On accessing the Admin UI, these users will see a Login screen, where they will need to enter their usernames and passwords.
[SQL Query Errors Graph](../v2.1/admin-ui-sql-dashboard.html#sql-query-errors) | On the [SQL Dashboard](../v2.1/admin-ui-sql-dashboard.html), the **SQL Query Errors** graph displays the 10-second average of the number of SQL statements that returned a planning, runtime, or retry error.
[Hardware Dashboard](../v2.1/admin-ui-hardware-dashboard.html) | The Hardware dashboard lets you monitor CPU usage, disk throughput, network traffic, storage capacity, and memory.
[Advanced Debugging Page](../v2.1/admin-ui-debug-pages.html) (Experimental) | The **Advanced Debugging** page of the Admin UI provides links to advanced monitoring and troubleshooting reports and cluster configuration details. To view the **Advanced Debugging** page, [access the Admin UI](../v2.1/admin-ui-access-and-navigate.html#access-the-admin-ui) and then click the gear icon on the left-hand navigation bar.
[Statements page](../v2.1/admin-ui-statements-page.html) | The **Statements** page helps you identify frequently executed or high latency SQL statements. The **Statements** page also allows you to view the details of an individual SQL statement by clicking on the statement to view the Statement Details page.

## Backward-Incompatible Changes

Change | Description
-------|------------
[Zone Configurations](../v2.1/configure-replication-zones.html) | **Deprecated.** The `cockroach zone` command has been deprecated. To manage [replication zones](../v2.1/configure-replication-zones.html), use the [`CONFIGURE ZONE`](../v2.1/configure-zone.html) statement to [add](../v2.1/configure-replication-zones.html#create-a-replication-zone-for-a-system-range), [modify](../v2.1/configure-replication-zones.html#edit-the-default-replication-zone), [reset](../v2.1/configure-replication-zones.html#reset-a-replication-zone), and [remove](../v2.1/configure-replication-zones.html#remove-a-replication-zone) replication zones.
[`SNAPSHOT` isolation levels](../v2.1/transactions.html#isolation-levels) | **Removed.** Transactions that request to use `SNAPSHOT` are now mapped to [`SERIALIZABLE`](../v2.1/demo-serializable.html).

## Known Limitations

For information about limitations we've identified in CockroachDB v2.1, with suggested workarounds where applicable, see [Known Limitations](../v2.1/known-limitations.html).

## Documentation Updates

Topic | Description
------|------------
[Backup and Restore](../v2.1/backup-and-restore.html) | This page shows you the different ways that you can back up and restore a CockroachDB database.
[Client Connection Parameters](../v2.1/connection-parameters.html) | This new page describes the parameters used to establish a client connection. The client connection parameters determine which CockroachDB cluster they connect to, and how to establish this network connection.
[CockroachDB Training: SQL Basics](../v2.1/training/sql-basics.html) | In this new training section, you'll learn how to use basic SQL statements.
[Performance Benchmarking](../v2.1/performance-benchmarking-with-tpc-c.html) | This page walks you through [TPC-C](http://www.tpc.org/tpcc/) performance benchmarking on CockroachDB. It measures tpmC (new order transactions/minute) on two TPC-C datasets: 1,000 warehouses (for a total dataset size of 200GB) on 3 nodes and 10,000 warehouses (for a total dataset size of 2TB) on 30 nodes.
[Build a Go App with CockroachDB](../v2.1/build-a-go-app-with-cockroachdb.html) | This tutorial now shows you how to use a secure local cluster to build a simple Go application with CockroachDB.
[Build a Python App with CockroachDB](../v2.1/build-a-python-app-with-cockroachdb.html) | This tutorial now shows you how to use a secure local cluster to build a simple Python application with CockroachDB.
[Build a Ruby App with CockroachDB](../v2.1/build-a-ruby-app-with-cockroachdb.html) | This tutorial now shows you how to use a secure local cluster to build a simple Ruby application with CockroachDB.
[Build a Java App with CockroachDB](../v2.1/build-a-java-app-with-cockroachdb.html) | This tutorial now shows you how to use a secure local cluster to build a simple Java application with CockroachDB.
[Build a PHP App with CockroachDB](../v2.1/build-a-php-app-with-cockroachdb.html) | This tutorial now shows you how to use a secure local cluster to build a simple PHP application with CockroachDB.
[Migration Guide](../v2.1/migration-overview.html) | This new page lists general considerations to be aware of as you plan your migration to CockroachDB.
[Migrate from Postgres to CockroachDB](../v2.1/migrate-from-postgres.html) | This new page has instructions for migrating data from Postgres to CockroachDB using [`IMPORT`](../v2.1/import.html)'s support for reading `pg_dump` files.
[Migrate from MySQL to CockroachDB](../v2.1/migrate-from-mysql.html) | This new page has instructions for migrating data from MySQL to CockroachDB using [`IMPORT`](../v2.1/import.html)'s support for reading `mysqldump` files.
[Migrate from CSV to CockroachDB](../v2.1/migrate-from-csv.html) | This new page has instructions for migrating data from CSV files into CockroachDB using [`IMPORT`](../v2.1/import.html).
[Performance Tuning Tutorial](../v2.1/performance-tuning.html) | This new tutorial shows you essential techniques for getting fast reads and writes in CockroachDB, starting with a single-region deployment and expanding into multiple regions.
[`SERIALIZABLE` Demo](../v2.1/demo-serializable.html) | This new tutorial goes through a hypothetical scenario that demonstrates the importance of `SERIALIZABLE` isolation for data correctness.
[`WINDOW FUNCTIONS`](../v2.1/window-functions.html) | This new page provides information about window functions. A window function performs a calculation across a set of table rows that are somehow related to the current row.
