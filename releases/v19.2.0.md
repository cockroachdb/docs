---
title: What&#39;s New in v19.2.0
toc: true
summary: Additions and changes in CockroachDB version v19.2.0.
---

## November 12, 2019

With the release of CockroachDB v19.2, we’ve made a variety of performance, resiliency, and usability improvements. Check out a comprehensive [summary of the most significant user-facing changes](#summary) and then [upgrade to CockroachDB v19.2](../v19.2/upgrade-cockroach-version.html). You can also read more about these changes in the [v19.2 blog post](https://www.cockroachlabs.com/blog/cockroachdb-19dot2-release/) or [watch our 19.2 release demo and overview](https://www.cockroachlabs.com/webinars/19-2-release).

Get future release notes emailed to you:

<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

{{site.data.alerts.callout_success}}
In addition to v19.2, we're launching [**Cockroach University**](https://university.cockroachlabs.com/catalog), a free, online learning tool for developers and architects who want to gain a fundamental understanding of distributed databases and deep knowledge of CockroachDB’s functionality and architecture. The first course, “Getting Started with CockroachDB,” uses videos, exercises, and quizzes to teach the key characteristics of a distributed SQL database, walking you through how to spin up a CockroachDB instance, run basic queries, and test out CockroachDB’s unique capabilities. For additional information or to register, visit [university.cockroachlabs.com](https://university.cockroachlabs.com/catalog).
{{site.data.alerts.end}}

## Downloads

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.0.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.0.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.1.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v19.2.0.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

## Docker image

{% include copy-clipboard.html %}
~~~ shell
$ docker pull cockroachdb/cockroach:v19.2.0
~~~

## Summary

This section summarizes the most significant user-facing changes in v19.2.0. For a complete list of features and changes, including bug fixes and performance improvements, see the [release notes](index.html#testing-releases) for previous testing releases.

- [CockroachCloud](#cockroachcloud)
- [Core features](#core-features)
- [Enterprise features](#enterprise-features)
- [Backward-incompatible changes](#backward-incompatible-changes)
- [Known limitations](#known-limitations)
- [Documentation](#documentation)

{{site.data.alerts.callout_info}}
In addition to the features below, SQL support for timestamp objects with a precision value, present in earlier testing releases of v19.2, has been reverted.
{{site.data.alerts.end}}

<style>
    table td:first-child {
        min-width: 225px;
    }
</style>

### CockroachCloud

[**CockroachCloud**](https://www.cockroachlabs.com/product/cockroachcloud/) will soon offer a completely self-service account creation and management workflow as well as single-region cluster creation in AWS and GCP using a credit card. Sign up for the beta program [here](https://www.cockroachlabs.com/product/cockroachcloud/).

### Core features

These features are freely available in the core version and do not require an enterprise license.

{{site.data.alerts.callout_info}}
The core version of CockroachDB v19.2 uses the Business Source License instead of the Apache 2.0 License. For more information on why we changed our licensing approach and some practical questions and implications, see our [blog post](https://www.cockroachlabs.com/blog/oss-relicensing-cockroachdb/) and [Licensing FAQs](../v19.2/licensing-faqs.html). The full details of the license can be found on [Github](https://github.com/cockroachdb/cockroach/blob/master/licenses/BSL.txt).
{{site.data.alerts.end}}

Feature | Description
--------|------------
[**Parallel Commits**](../v19.2/architecture/transaction-layer.html#parallel-commits) | CockroachDB's new optimized atomic commit protocol cuts the commit latency of a transaction in half, from two rounds of consensus down to one. Combined with [transaction pipelining](../v19.2/architecture/transaction-layer.html#transaction-pipelining), parallel commits brings the latency incurred by common OLTP transactions to near the theoretical minimum: the sum of all read latencies plus one round of consensus latency. This especially lowers latency for transactions involving secondary indexes both in multi-region and single-region deployments.
[**Vectorized Query Execution**](../v19.2/vectorized-execution.html) | CockroachDB now supports [column-oriented](https://en.wikipedia.org/wiki/Column-oriented_DBMS#Column-oriented_systems) ("vectorized") query execution for operations that are guaranteed to execute in memory on tables with [supported data types](../v19.2/vectorized-execution.html#supported-data-types).
**Bulk Import Improvements** | CockroachDB now supports efficiently loading large amounts of CSV data into existing tables using the new [`IMPORT INTO`](../v19.2/import-into.html) statement.<br><br>Also, for the previously existing [`IMPORT`](../v19.2/import.html#performance) statement for bulk import of new tables, using as many files as you have nodes and ordering data in imported files by primary key now increases parallelism and performance.
[**Data Replication Reports**](../v19.2/query-replication-reports.html) | Several new and updated system tables can help you query the status of your cluster's data replication, data placement, and replication zone constraint conformance. For example, you can use these reports to see what data is under-replicated or unavailable, to show which of your localities (if any) are vulnerable to data unavailability in more common failure scenarios, and to see if any of your cluster's data placement constraints are being violated.
[**Multi-Use CTEs**](../v19.2/common-table-expressions.html#reusing-common-table-expressions) | Common Table Expressions can now be re-used multiple times in the same query via a `WITH` operator.
[**Comprehensive Cost-Based Optimizer**](../v19.2/cost-based-optimizer.html) | All SQL queries now leverage the cost-based optimizer to choose the lowest cost plans, including DDL statements and window functions that previously leveraged the legacy heuristic planner.
[**Ordering Aggregations**](../v19.2/select-clause.html#order-aggregate-function-input-rows-by-column) | Non-commutative aggregate functions are sensitive to the order in which rows are processed. This order can now be controlled with an [`ORDER BY`](../v19.2/query-order.html) clause within the function argument list.
**Index Hints for `UPDATE` & `DELETE`** | It's now possible to [force the use of a specific index for deleting rows](../v19.2/delete.html#force-index-selection-for-deletes) and [updating rows](../v19.2/update.html#update-with-index-hints).
[**Streaming with JDBC**](../v19.2/build-a-java-app-with-cockroachdb.html#retrieve-large-data-sets-in-chunks-using-cursors) | CockroachDB now provides limited support for Postgres wire-protocol cursors for implicit and explicit transactions executed to completion. The Java JDBC driver can use this protocol to stream queries with large result sets, providing much faster performance than result paginating with [`LIMIT ... OFFSET`](../v19.2/limit-offset.html).
[**Transaction Latency Graphs**](../v19.2/admin-ui-sql-dashboard.html) | The **SQL Dashboard** in the Admin UI now provides timeseries graphs of p90 and p99 transaction latencies to complement the per-statement metrics on the [**Statements** page](../v19.2/admin-ui-statements-page.html).
**`CREATE TABLE AS` Improvements** | When using the `CREATE TABLE AS` statement to create a new table from a selection query, you can now [specify the primary key](../v19.2/create-table-as.html#specify-a-primary-key) and [define column families](../v19.2/create-table-as.html#define-column-families) for the new table. The latter is especially helpful for [modifying the primary key of tables for geo-partitioning](../v19.2/create-table-as.html#specify-a-primary-key-for-partitioning). Also, `CREATE TABLE AS` is now usable for larger tables than before.
[**Adding `NOT NULL` Constraint**](../v19.2/alter-column.html#set-not-null-constraint) | It's now possible to add the `NOT NULL` constraint to an existing column, in addition to the previous ability to set this constraint during table creation.
**Local Testing Improvements** | CockroachDB v19.2 includes several usability improvements to running CockroachDB locally for SQL testing and app development. First, the [`cockroach demo`](../v19.2/cockroach-demo.html) command, which starts a temporary, in-memory CockroachDB cluster with immediate access to an interactive SQL shell, now comes pre-loaded with the `movr` dataset and a temporary enterprise license that expires after an hour. This means users can try out [enterprise features](../v19.2/enterprise-licensing.html) quickly before requesting a license for use in a persistent cluster.<br><br>Also, the `--nodes` flag now lets you specify the number of in-memory nodes to create for the demo, with the new `--demo-locality` flag setting locality information for each node. Alternatively, the `--geo-partitioned-replicas` flag lets you start a 9-node demo cluster with the [Geo-Partitioned Replicas](../v19.2/topology-geo-partitioned-replicas.html) data topology applied automatically to the `movr` database.<br><br>Finally, the `--with-load` command lets you run `movr` as an active workload against the in-memory cluster.
**Cluster Startup Improvements** | There are now distinct methods for starting single-node and multi-node clusters. For multi-node clusters, start each node with the [`cockroach start`](../v19.2/cockroach-start.html) command including a `--join` flag and then run the one-time `cockroach init` command. Using `cockroach start` without the `--join` flag is now deprecated and will be removed in a future release.<br><br>For single-node clusters, use the new [`cockroach start-single-node`](../v19.2/cockroach-start-single-node.html) command to start just a single node with replication disabled and without the need for any extra commands.
[**Built-in Workload Improvements**](../v19.2/cockroach-workload.html) | Cockroach Lab's fictional vehicle-sharing app, [MovR](../v19.2/movr.html), is now available as a sample workload using the `cockroach workload` CLI command. Also, the `--display-every` and `--display-format` flags now make it possible to control the frequency and format for printing per-operation statistics for several workloads.
**Data Type Improvements** | [`DATE`](../v19.2/date.html#syntax) values in CockroachDB are now fully [PostgreSQL-compatible](https://www.postgresql.org/docs/current/datatype-datetime.html), including support for special values (e.g. `+/- infinity`). Existing dates outside of the PostgreSQL date range (`4714-11-24 BC` to `5874897-12-31`) are converted to `+/- infinity` dates.<br><br>Also, you can now use the `timezone()` and `AT TIME ZONE` functions to convert a `TIMESTAMPTZ` into a [`TIMESTAMP`](../v19.2/timestamp.html) at a specified timezone, or vice versa.
[**Interactive SQL Shell Commands**](../v19.2/cockroach-sql.html#commands) | Within the interactive SQL shell, the `\l`, `\dt`, `\d`, and `\d <table>` commands now list all databases in the CockroachDB cluster, show the tables of the current schema in the current database, list the users for all databases, and show details about columns in the specified table, respectively.
[**Removing Manual Splits**](../v19.2/unsplit-at.html) | The new `UNSPLIT AT` statement removes a [split enforcement](../v19.2/split-at.html) on a key-value range, at a specified row in a table or index, allowing CockroachDB to [merge the range](../v19.2/range-merges.html) as needed.
[**Locking and `FOR UPDATE`**](../v19.2/postgresql-compatibility.html#locking-and-for-update) | Because CockroachDB only supports `SERIALIZABLE` isolation, locking is not required to order concurrent transactions relative to each other. However, the `FOR UPDATE` locking clause is now supported in selection queries as a no-op for database migration compatibility only.
[**Showing Row Location**](../v19.2/show-range-for-row.html) | The new `SHOW RANGE ... FOR ROW` statement shows information about a range for a particular row of data. This information is useful for verifying how SQL data maps to underlying ranges, and where the replicas for a range are located. However, note that this is an experimental feature, and the interface and output are subject to change.
**Viewing Node Locality** | It's now easy to retrieve the localities of nodes for setting zone configuration constraints via the [`SHOW LOCALITY`](../v19.2/show-locality.html) statement and the [`cockroach node status`](../v19.2/cockroach-node.html) command.
**Viewing Complete Jobs** | By default, the `SHOW JOBS` statement lists all of the types of long-running tasks your cluster has performed in the last 12 hours. You can now use the [`WHEN COMPLETE`](../v19.2/show-jobs.html#show-job-when-complete) option to return only after all specified job ID(s) have completed.
**Viewing Comments for Virtual Tables** | Using [`SHOW TABLES ... WITH COMMENTS` on virtual tables](../v19.2/show-tables.html#show-virtual-tables-with-comments) in the `pg_catalog`, `information_schema`, and `crdb_internal` schemas now returns useful comments, often with links to further documentation.

### Enterprise features

These features require an [enterprise license](../v19.2/enterprise-licensing.html). Register for a 30-day trial license [here](https://www.cockroachlabs.com/get-cockroachdb/), or consider testing enterprise features locally using the [`cockroach demo`](../v19.2/cockroach-demo.html) CLI command, which starts an in-memory CockroachDB cluster with a temporary enterprise license pre-loaded.

Feature | Description
--------|------------
**Backup & Restore Improvements** | CockroachDB now supports [locality-aware backup and restore](../v19.2/backup-and-restore.html#locality-aware-backup-and-restore) such that each node writes to and restores from files in its locality. This can reduce cloud storage data transfer costs by keeping data within cloud regions and help you comply with data domiciling requirements.<br><br>Also, using `SHOW BACKUP` with the new [`SCHEMAS`](../v19.2/show-backup.html#show-a-backup-with-schemas) option adds the number of rows and the schema of the backed up table to the output, and using `RESTORE` with the new [`skip_missing_views`](../v19.2/restore.html#skip_missing_views) option restores a table from a view without restoring the view's dependencies.
**Geo-Partitioning Improvements** | CockroachDB v19.2 includes several usability improvements to geo-partitioning. First, it's now possible to name partitions identically across indexes of a table (e.g., `us-west`, `us-east`) and use a [single command to create zone configurations for all partitions of a given name](../v19.2/configure-zone.html#create-a-replication-zone-for-a-partition), saving you multiple steps.<br><br>Next, it's easy to retrieve the localities of nodes for setting zone configuration constraints via the [`SHOW LOCALITY`](../v19.2/show-locality.html) statement and the [`cockroach node status`](../v19.2/cockroach-node.html) command, both of which do not require an enterprise license.<br><br>There are now also several ways to view the details of partitions and confirm they are in effect, from the outputs of [`SHOW CREATE TABLE`](../v19.2/show-create-table.html) and the table schemas listed on the [**Databases** page](../v19.2/admin-ui-databases-page.html) in the Admin UI to the output of [`SHOW PARTITIONS`](../v19.2/show-partitions.html).<br><br>Finally, it's now much easier to [efficiently query partitioned data](../v19.2/partitioning.html#querying-partitions); when filtering by the column directly following the partitioned prefix in the primary key, the cost-based optimizer creates a query plan that scans each partition in parallel, rather than performing a costly sequential scan of the entire table. Filtering by the partition value itself can further improve performance by limiting the scan to the specific partition(s) that contain the data that you are querying.

### Backward-incompatible changes

Before [upgrading to CockroachDB v19.2.0](../v19.2/upgrade-cockroach-version.html), be sure to review the following backward-incompatible changes and adjust your application as necessary.

- The `cockroach zone` CLI command has been removed. Use the equivalent [`CONFIGURE ZONE`](../v19.2/configure-zone.html) and [`SHOW ZONE CONFIGURATIONS`](../v19.2/show-zone-configurations.html) SQL statements for managing replication zones instead.

- The [`IMPORT`](../v19.2/import.html) SQL statement no longer accepts quotes inside unquoted CSV fields.

- [`CONFIGURE ZONE`](../v19.2/configure-zone.html) SQL statements now fail if the user does not have sufficient privileges. If the target is a `system` range, the `system` database, or a table in the `system` database, the user must have an admin role. For all other databases and tables, the user must have the `CREATE` privilege on the target database or table.

    This change might be backward-incompatible for users running scripted `CONFIGURE ZONE` statements with restricted permissions. To add the necessary permissions, use [`GRANT` &lt;privileges&gt;](../v19.2/grant.html) or [`GRANT` &lt;roles&gt;](../v19.2/grant-roles.html) as a user with an admin role. For example, to grant a user the admin role, run `GRANT admin TO <user>`. To grant the `CREATE` privilege on a database or table, run `GRANT CREATE ON [DATABASE | TABLE] <name> TO <user>`.

- [`INT`](../v19.2/int.html) and [`FLOAT`](../v19.2/float.html) columns of less than the max width will now be returned as their own type via the binary protocol. For example, an `int4` column will be returned in 32 bits over the pgwire binary protocol instead of 64 bits.

- The `changefeed.min_high_water` metric has been removed from the [Prometheus Endpoint](../v19.2/monitoring-and-alerting.html#prometheus-endpoint). For [detecting high changefeed latency](../v19.2/monitoring-and-alerting.html#changefeed-is-experiencing-high-latency), use the `changefeed.max_behind_nanos` metric instead.

### Known limitations

For information about new and unresolved limitations in CockroachDB v19.2, with suggested workarounds where applicable, see [Known Limitations](../v19.2/known-limitations.html).

### Documentation

Topic | Description
------|------------
**Performance Benchmarking** | Added an [overview of CockroachDB's performance profiles](../v19.2/performance.html) (scaling, throughput, latency), based on Cockroach Lab's extensive testing using industry-standard benchmarks like TPC-C and Sysbench, as well as [detailed instructions for reproducing our TPC-C benchmarking results](../v19.2/performance-benchmarking-with-tpc-c-10-warehouses.html) at different scales.
**Multi-Region Deployment** | Updated the tutorial on getting [low latency reads and writes in a multi-region cluster](../v19.2/demo-low-latency-multi-region-deployment.html) to feature two of the most important multi-region data topologies for dramatically reducing the impact of network latency, [Geo-Partitioned Replicas](../v19.2/topology-geo-partitioned-replicas.html) and [Duplicate Indexes](../v19.2/topology-duplicate-indexes.html).
**Orchestration with Kubernetes** | Expanded the tutorial on [Kubernetes single-region deployment](../v19.2/orchestrate-cockroachdb-with-kubernetes.html) to cover running on Amazon's hosted EKS and [naming CSR naming requirements](../v19.2/orchestrate-cockroachdb-with-kubernetes.html#csr-names) for secure deployments. Also updated and expanded the instructions on using Helm.
**Client-Side Transaction Retries** | Updated and simplified the client-side transaction logic in the [Java](../v19.2/build-a-java-app-with-cockroachdb.html), [Python](../v19.2/build-a-python-app-with-cockroachdb.html), and [Go](../v19.2/build-a-go-app-with-cockroachdb.html) getting started tutorials and code samples. Also added [pseudocode](../v19.2/transactions.html#client-side-intervention-example) to help with the implementation of this logic in other languages as well as [instructions for authors of database drivers and ORMs](../v19.2/advanced-client-side-transaction-retries.html) who would like to implement client-side retries in their database driver or ORM for maximum efficiency and ease of use by application developers.
**SQL Tuning with `EXPLAIN`** | Added a tutorial on [how to use `EXPLAIN` to identify and resolve common SQL performance problems](../v19.2/sql-tuning-with-explain.html).
**Testing with MovR Dataset** | Added an [overview of MovR](../v19.2/movr.html), CockroachDB's fictional vehicle-sharing dataset and application, and updated several SQL pages and examples to use the built-in MovR dataset, for example, [Learn CockroachDB SQL](../v19.2/learn-cockroachdb-sql.html).
**Migration from Oracle** | Added guidance on [migrating from Oracle](../v19.2/migrate-from-oracle.html), including the process of converting schema and exporting data for loading into CockroachDB.
**App Deployment on CockroachCloud** | Added a tutorial on [running a sample To-Do app in Kubernetes with CockroachCloud](../cockroachcloud/deploy-a-python-to-do-app-with-flask-kubernetes-and-cockroachcloud.html) as the datastore. The app is written in Python with Flask as the web framework and SQLAlchemy for working with SQL data, and the code is open-source and forkable.
