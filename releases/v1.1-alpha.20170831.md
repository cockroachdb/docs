---
title: What&#39;s New in v1.1-alpha.20170831
toc: false
summary: Additions and changes in CockroachDB version v1.1-alpha.20170831
---

## Aug 31, 2017

Get future release notes emailed to you:

<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

### Downloads

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170831.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170831.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170831.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170831.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

### SQL Language Changes

- The new [`IMPORT TABLE`](../v1.1/import-table.html) statement provides a fast way to import an entire table's data into CockroachDB by loading CSV files in a distributed fashion. Although this feature uses [CCL-licensed code](https://www.cockroachlabs.com/cockroachdb-community-license/), and is therefore available only in builds that include CCL-licensed code, using it is free and does not require an enterprise license. [#17539](https://github.com/cockroachdb/cockroach/pull/17539)
- The session variable `sql_safe_updates` can be set to disable certain "dangerous" SQL statements, such as `DELETE` or `UPDATE` without a `WHERE` clause. [#17604](https://github.com/cockroachdb/cockroach/pull/17604)
- Type hints are now permitted even when they are imprecise, improving compatibility with some drivers and frameworks. [#16672](https://github.com/cockroachdb/cockroach/pull/16672)
- Untyped string literals can now be implicitly cast to numbers, improving compatibility with Javascript clients. [#15903](https://github.com/cockroachdb/cockroach/pull/15903)
- [Query cancellation](../v1.1/cancel-query.html) is now supported for queries using the distributed SQL engine. [#17527](https://github.com/cockroachdb/cockroach/pull/17527)
- The output of [`SHOW SESSIONS`](../v1.1/show-sessions.html) now includes a `last_active_query` column. [#17579](https://github.com/cockroachdb/cockroach/pull/17579)
- The [`SET TRANSACTION`](../v1.1/set-transaction.html) statement no longer requires commas when multiple directives are given. [#17723](https://github.com/cockroachdb/cockroach/pull/17723)
- The PostgreSQL-compatible `e'\\x0d0a...'` syntax for hex-encoded byte literals is now supported. [#17693](https://github.com/cockroachdb/cockroach/pull/17693)
- Star expansion is now supported in more cases. [#17833](https://github.com/cockroachdb/cockroach/pull/17833)
- The `information_schema.sequences` table is now supported; it is always empty as sequences are not yet supported. [#17804](https://github.com/cockroachdb/cockroach/pull/17804)
- Improved support for `GROUP BY` and `ORDER BY` with tuples. [#17888](https://github.com/cockroachdb/cockroach/pull/17888)
- Statements that spawn jobs ([`BACKUP`](../v1.1/backup.html), [`RESTORE`](../v1.1/restore.html), schema changes) no longer appear in [`SHOW QUERIES`](../v1.1/show-queries.html). [#17786](https://github.com/cockroachdb/cockroach/pull/17786)

### Command-Line Interface Changes

- Fatal error messages are now printed to both `stderr` and the logs. [#17588](https://github.com/cockroachdb/cockroach/pull/17588)
- The [`cockroach dump`](../v1.1/sql-dump.html) command now understands [views](../v1.1/views.html) and orders tables to satisfy [foreign key constraints](../v1.1/foreign-key.html) (as long as there are no cycles). [#17581](https://github.com/cockroachdb/cockroach/pull/17581)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now sets a default `application_name` of `cockroach`. [#17602](https://github.com/cockroachdb/cockroach/pull/17602)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now prints hints and warnings when available from the server. [#17604](https://github.com/cockroachdb/cockroach/pull/17604)

### Admin UI Changes

- Various debugging pages are now available at `/#/debug`. [#17635](https://github.com/cockroachdb/cockroach/pull/17635)
- Changes to [cluster settings](../v1.1/cluster-settings.html) are now recorded in the event log. [#17619](https://github.com/cockroachdb/cockroach/pull/17619) [#17866](https://github.com/cockroachdb/cockroach/pull/17866)
- The **Live Bytes per Store** graph has been replaced with **Logical Bytes per Store**, which includes the size of old MVCC values waiting to be garbage collected. [#17782](https://github.com/cockroachdb/cockroach/pull/17782)
- The `/debug/vmodule/` endpoint is now disabled by default; set the cluster setting `server.remote_debugging.vmodule` to enable it. [#17792](https://github.com/cockroachdb/cockroach/pull/17792)

### Bug Fixes

- [Foreign keys](../v1.1/foreign-key.html) that point to a prefix of an existing index now work correctly. Previously, rows could be deleted from the referenced table without recognizing the constraint violation if rows in the referring table pointed to them. These foreign keys are also now shown correctly in [`SHOW CREATE TABLE`](../v1.1/show-create-table.html). [#17638](https://github.com/cockroachdb/cockroach/pull/17638)
- Fixed a bug in `ReverseScan` that could cause data to be missing from query results. [#17868](https://github.com/cockroachdb/cockroach/pull/17868)
- Fixed a build error on FreeBSD. [#17650](https://github.com/cockroachdb/cockroach/pull/17650)
- Windows builds no longer fail with `SyncWAL` errors. [#17735](https://github.com/cockroachdb/cockroach/pull/17735)
- Improved error handling to reduce panics when unsupported SQL features are attempted. [#17521](https://github.com/cockroachdb/cockroach/pull/17521)
- Corrected computation of lease type metrics. [#17615](https://github.com/cockroachdb/cockroach/pull/17615)
- More errors now return the correct PostgreSQL error code. [#17630](https://github.com/cockroachdb/cockroach/pull/17630) [#17708](https://github.com/cockroachdb/cockroach/pull/17708)
- Queries are not removed from [`SHOW QUERIES`](../v1.1/show-queries.html) or [`SHOW SESSIONS`](../v1.1/show-sessions.html) until all their results have been sent to the client. [#17579](https://github.com/cockroachdb/cockroach/pull/17579)
- The crash reporter will now time out instead of waiting indefinitely to reach the server. [#17683](https://github.com/cockroachdb/cockroach/pull/17683)
- gRPC no longer closes inter-node connections unnecessarily. [#17706](https://github.com/cockroachdb/cockroach/pull/17706)
- Fixed `duplicate key value` errors when performing large number of splits. [#17763](https://github.com/cockroachdb/cockroach/pull/17763)
- Fixed a deadlock in `quotaPool`. [#17796](https://github.com/cockroachdb/cockroach/pull/17796)
- Fixed a deadlock in `RangeLookup` during `SCATTER`. [#17760](https://github.com/cockroachdb/cockroach/pull/17760)
- The distributed SQL engine avoids scheduling work on nodes running an incompatible version. [#17747](https://github.com/cockroachdb/cockroach/pull/17747)
- `AS OF SYSTEM TIME 0` is now a normal error instead of a panic. [#17680](https://github.com/cockroachdb/cockroach/pull/17680)
- Fixed a panic in `distSQLPlanner`. [#17852](https://github.com/cockroachdb/cockroach/pull/17852)
- Fixed a flow control leak that could lead to deadlock. [#17856](https://github.com/cockroachdb/cockroach/pull/17856)
- Parallelized queries now handle retryable errors correctly. [#17627](https://github.com/cockroachdb/cockroach/pull/17627)
- Nodes now panic if they fail a consistency check. The `server.consistency_check.interval` [cluster setting](../v1.1/cluster-settings.html) replaces the `COCKROACH_CONSISTENCY_CHECK_INTERVAL` environment variable for configuring the consistency checker. [#17853](https://github.com/cockroachdb/cockroach/pull/17853)
- [Dropping an interleaved index](../v1.1/drop-index.html) no longer leaves the table in a broken state. [#17860](https://github.com/cockroachdb/cockroach/pull/17860)
- Changed "flow already registered" from a panic to a regular error. [#17876](https://github.com/cockroachdb/cockroach/pull/17876)

### Performance Improvements

- Reduced unnecessary rebalancing. [#17613](https://github.com/cockroachdb/cockroach/pull/17613)
- Increased the size of the leaseholder cache. [#17623](https://github.com/cockroachdb/cockroach/pull/17623)
- Replaced several `sync.Maps` with a faster specialized `IntMap`. [#17625](https://github.com/cockroachdb/cockroach/pull/17625)
- Improved job recovery after node restarts. [#17590](https://github.com/cockroachdb/cockroach/pull/17590)
- Reduced synchronization overhead for quiesced replicas. [#17617](https://github.com/cockroachdb/cockroach/pull/17617)
- Increased the number of allowed gossip connections to reduce thrashing. [#17633](https://github.com/cockroachdb/cockroach/pull/17633)
- The `ALTER TABLE ... SCATTER` statement is more efficient. [#17644](https://github.com/cockroachdb/cockroach/pull/17644)
- Attempting to add a column with the `NOT NULL` constraint but no default value now fails earlier. [#17634](https://github.com/cockroachdb/cockroach/pull/17634)
- The `sql.defaults.distsql.tempstorage` [cluster setting](../v1.1/cluster-settings.html) now defaults to true. [#17665](https://github.com/cockroachdb/cockroach/pull/17665)
- Improved rebalancing on clusters with little data. [#17733](https://github.com/cockroachdb/cockroach/pull/17733)
- Raft now uses `PreVote` instead of `CheckQuorum` to minimize disruptions when partitions heal. [#17808](https://github.com/cockroachdb/cockroach/pull/17808)
- Improved performance of raft log truncation. [#17818](https://github.com/cockroachdb/cockroach/pull/17818)
- The "node liveness" span is now split by default to minimize interactions with the timeseries span. [#17810](https://github.com/cockroachdb/cockroach/pull/17810)
- "Slow timer" log messages are no longer repeated. [#17828](https://github.com/cockroachdb/cockroach/pull/17828)
- Set-returning functions used without a `FROM` clause no longer generate a cross-join. [#17835](https://github.com/cockroachdb/cockroach/pull/17835)
- Memory needed for the RocksDB memtable now counts towards the cache memory budget. [#17865](https://github.com/cockroachdb/cockroach/pull/17865)
- Reduced log spam for distSQL memory usage. [#17807](https://github.com/cockroachdb/cockroach/pull/17807)

### Doc Updates

- Documented SQL statements for managing queries and sessions: [`SHOW QUERIES`](../v1.1/show-queries), [`CANCEL QUERY`](../v1.1/cancel-query.html), [`SHOW SESSIONS`](../v1.1/show-sessions.html). [#1828](https://github.com/cockroachdb/docs/pull/1828)
- Added a quick reference on [Managing Long-Running Queries](manage-long-running-queries.html). [#1828](https://github.com/cockroachdb/docs/pull/1828)
- Documented the [`SHOW BACKUP`](../v1.1/show-backup.html) statement. [#1869](https://github.com/cockroachdb/docs/pull/1869)
- Added overview pages for the [`ALTER DATABASE`](../v1.1/alter-database.html) and [`ALTER INDEX`](../v1.1/alter-index.html) statements that point to pages for relevant subcommands, e.g., `RENAME DATABASE` and `RENAME INDEX`. [#1869](https://github.com/cockroachdb/docs/pull/1869)
- Documented the [`ARRAY`](../v1.1/array.html) and [`UUID`](../v1.1/uuid.html) data types. [#1837](https://github.com/cockroachdb/docs/pull/1837) [#1834](https://github.com/cockroachdb/docs/pull/1834)
