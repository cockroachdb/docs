---
title: What&#39;s New in 1.0-rc.1
toc: false
summary: Additions and changes in CockroachDB version 1.0-rc.1
---

## Apr 27, 2017

Get future release notes emailed to you:
<div class="hubspot-install-form install-form-1 clearfix">
    <script>
        hbspt.forms.create({
            css: '',
            cssClass: 'install-form',
            portalId: '1753393',
            formId: '39686297-81d2-45e7-a73f-55a596a8d5ff',
            formInstanceId: 1,
            target: '.install-form-1'
        });
    </script>
</div>

### Binaries

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-1.0-rc.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-1.0-rc.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-1.0-rc.1.windows-6.2-amd64.zip"><button id="windows" data-eventcategory="windows-binary-release-notes">Windows</button></a>
</div>

### Backwards-Incompatible Changes

- It is not possible to upgrade directly to this version of CockroachDB from a version older than `beta-20170413`. Upgrade any older clusters to that version first. [#15228](https://github.com/cockroachdb/cockroach/pull/15228)
- The `cockroach start` command no longer recognizes the `COCKROACH_INSECURE` and `COCKROACH_CERTS_DIR` environment variables which are intended to be client-only. Use the `--insecure` and `--certs-dir` command-line flags instead. [#15196](https://github.com/cockroachdb/cockroach/pull/15196) [#15288](https://github.com/cockroachdb/cockroach/pull/15288)
- Older certificate-related command-line flags have been removed; use `--certs-dir` instead. [#15241](https://github.com/cockroachdb/cockroach/pull/15241)
- Various environment variables have been removed in favor of the new `CLUSTER SETTING` commands described below.
- The undocumented `SET SYNTAX` statement and the "modern" syntax variant have been removed. [#15064](https://github.com/cockroachdb/cockroach/pull/15064)

### General Changes

- Anonymous usage statistics are now reported by default. To opt out, set `COCKROACH_SKIP_ENABLING_DIAGNOSTIC_REPORTING=true` in the environment when starting the server or use `SET CLUSTER SETTING diagnostics.reporting.enabled = false` in the SQL shell for a running cluster. [#14901](https://github.com/cockroachdb/cockroach/pull/14901)

### Build Changes

- CockroachDB now builds on Windows. Windows support is currently experimental and is recommended only for development, not production.
- Building from source on macOS 10.11 works again. [#15168](https://github.com/cockroachdb/cockroach/pull/15168)
- Building from source on older CPUs (without SSE4.2) works again. [#15247](https://github.com/cockroachdb/cockroach/pull/15247)

### SQL Language Changes

- New commands `SET CLUSTER SETTING` and `SHOW ALL CLUSTER SETTINGS` can now be used to change certain cluster-wide settings. The following cluster settings are available in this release:
  - `diagnostics.reporting.enabled`
  - `enterprise.enabled`
  - `kv.raft.command.max_size`
  - `kv.raft_log.synchronize`
  - `kv.snapshot_rebalance.max_rate`
  - `kv.snapshot_recovery.max_rate`
  - `kv.transaction.max_intents`
  - `server.remote_debugging.mode`
  - `sql.metrics.statement_details.dump_to_logs`
  - `sql.metrics.statement_details.enabled`
  - `sql.metrics.statement_details.threshold`
  - `sql.trace.log_statement_execute`
  - `sql.trace.session_eventlog.enabled`
  - `sql.trace.txn.enable_threshold`
- The `PREPARE` and `EXECUTE` statements can now be used to use prepared statements in a SQL shell. [#15256](https://github.com/cockroachdb/cockroach/pull/15256)
- The `regexp_replace` function now handles newlines correctly, both with and without the `n` flag. [#15309](https://github.com/cockroachdb/cockroach/pull/15309)
- Precedence for the binary `~` operator (regex match) has been changed. [#15264](https://github.com/cockroachdb/cockroach/pull/15264)
- Ambiguous results now return the PostgreSQL "statement completion unknown" error code. [#15054](https://github.com/cockroachdb/cockroach/pull/15054)
- Time zones can now be specified in more formats in `DATE` types, including `+0700`, `+07`, `+7`, and `+07:00`. [#15177](https://github.com/cockroachdb/cockroach/pull/15177)
- Set-returning functions (like `generate_series()`) are now supported in more contexts. [#14369](https://github.com/cockroachdb/cockroach/pull/14369)

### Admin UI Changes

- Tooltips are now shown on graphs. [#15282](https://github.com/cockroachdb/cockroach/pull/15282)

### Command-Line Interface Changes

- The default lifetime of certificates generated by `cockroach cert` has been increased to 10 years. [#15306](https://github.com/cockroachdb/cockroach/pull/15306)
- The output format of `cockroach cert list` has been improved. [#15198](https://github.com/cockroachdb/cockroach/pull/15198)

### Bug Fixes

- Table scans over interleaved tables now work correctly. [#15043](https://github.com/cockroachdb/cockroach/pull/15043)
- Fixed backslash escaping when used with the Python `psycopg2` driver. [#15281](https://github.com/cockroachdb/cockroach/pull/15281)
- Improved certificate validation, fixing compatibility with client certs as used by `psql`. [#15286](https://github.com/cockroachdb/cockroach/pull/15286)
- Fixed a race between lease transfers and repair/rebalance operations. [#15355](https://github.com/cockroachdb/cockroach/pull/15355)
- Creating a table with a bad default expression no longer panics. [#15170](https://github.com/cockroachdb/cockroach/pull/15170)
- Improved tracking of memory used by aggregate functions. [#14904](https://github.com/cockroachdb/cockroach/pull/14904)
- Rebalancing now only considers ranges for which all replicas are healthy. [#15312](https://github.com/cockroachdb/cockroach/pull/15312)

### Performance Improvements

- Smoothed out request stats used by lease rebalancing. [#15156](https://github.com/cockroachdb/cockroach/pull/15156)
- Improved retry logic after lease failures. [#15199](https://github.com/cockroachdb/cockroach/pull/15199)
- Snapshots that are necessary for recovery are now given higher recovery than those used for rebalancing. [#15279](https://github.com/cockroachdb/cockroach/pull/15279)
- Very large transactions and commands that might cause the server to run out of memory are now rejected earlier. [#15350](https://github.com/cockroachdb/cockroach/pull/15350)

### Contributors

This release includes 118 merged PRs by 23 authors. We would like to thank first-time contributors Evgeniy Vasilev and Mahmoud Al-Qudsi from the CockroachDB community.
